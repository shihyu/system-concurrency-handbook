<!DOCTYPE HTML>
<html lang="zh-TW" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>ç¬¬11ç«  æ­»é– - é«˜ä¸¦ç™¼ç·¨ç¨‹é€šç”¨æ¦‚å¿µï¼ˆè·¨ Java/C++/Rust/Goï¼‰</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>â†</kbd> or <kbd>â†’</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">é«˜ä¸¦ç™¼ç·¨ç¨‹é€šç”¨æ¦‚å¿µï¼ˆè·¨ Java/C++/Rust/Goï¼‰</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="ç¬¬11ç« -æ­»é–"><a class="header" href="#ç¬¬11ç« -æ­»é–">ç¬¬11ç«  æ­»é–</a></h1>
<h2 id="111-æ­»é–å®šç¾©"><a class="header" href="#111-æ­»é–å®šç¾©">11.1 æ­»é–å®šç¾©</a></h2>
<!-- subsection-diagram -->
<h3 id="æœ¬å°ç¯€ç¤ºæ„åœ–"><a class="header" href="#æœ¬å°ç¯€ç¤ºæ„åœ–">æœ¬å°ç¯€ç¤ºæ„åœ–</a></h3>
<pre><code class="language-text">  è³‡æºåˆ†é…åœ–ï¼šå¾ªç’°ç­‰å¾…å½¢æˆæ­»é–

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Thread T1  â”‚         â”‚  Thread T2  â”‚
  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
         â”‚ æŒæœ‰(hold)              â”‚ æŒæœ‰(hold)
         â–¼                        â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Resource A â”‚         â”‚  Resource B â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â–²                        â–²
         â”‚ ç­‰å¾…(wait)              â”‚ ç­‰å¾…(wait)
  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”
  â”‚  Thread T2  â”‚         â”‚  Thread T1  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  T1 â†’ æŒæœ‰ Aï¼Œç­‰å¾… B
  T2 â†’ æŒæœ‰ Bï¼Œç­‰å¾… A
  â†” å½¢æˆæœ‰å‘å¾ªç’° â‡’ æ°¸é ç„¡æ³•æ¨é€² â‡’ æ­»é–
</code></pre>
<p>å…©å€‹æˆ–ä»¥ä¸ŠåŸ·è¡Œç·’äº’ç›¸ç­‰å¾…å°æ–¹é‡‹æ”¾è³‡æºï¼Œæ°¸é èµ°ä¸ä¸‹å»ã€‚</p>
<p>æ­»é–ï¼ˆDeadlockï¼‰æ˜¯æŒ‡ä¸€çµ„åŸ·è¡Œç·’é™·å…¥æ°¸ä¹…ç­‰å¾…çš„ç‹€æ…‹ï¼šæ¯å€‹åŸ·è¡Œç·’éƒ½åœ¨ç­‰å¾…å¦ä¸€å€‹åŸ·è¡Œç·’æŒæœ‰çš„è³‡æºï¼Œè€Œé‚£å€‹åŸ·è¡Œç·’ä¹Ÿåœ¨ç­‰å¾…æ›´å¤šè³‡æºï¼Œå½¢æˆä¸€å€‹é–‰åˆçš„ç­‰å¾…ç’°ã€‚ä½œæ¥­ç³»çµ±ç„¡æ³•è‡ªå‹•è§£é™¤é€™ç¨®åƒµå±€ï¼Œç¨‹å¼å°‡æ°¸ä¹…æ›èµ·ã€‚</p>
<h2 id="112-æ¼”åŒ–éç¨‹å°æ‡‰-11211123"><a class="header" href="#112-æ¼”åŒ–éç¨‹å°æ‡‰-11211123">11.2 æ¼”åŒ–éç¨‹ï¼ˆå°æ‡‰ 11.2.1~11.2.3ï¼‰</a></h2>
<!-- subsection-diagram -->
<h3 id="æœ¬å°ç¯€ç¤ºæ„åœ–-1"><a class="header" href="#æœ¬å°ç¯€ç¤ºæ„åœ–-1">æœ¬å°ç¯€ç¤ºæ„åœ–</a></h3>
<pre><code class="language-text">  æ™‚é–“è»¸ï¼šå®‰å…¨ç‹€æ…‹ â†’ ä¸å®‰å…¨ç‹€æ…‹ â†’ æ­»é–

  æ™‚é–“é»   Thread T1              Thread T2            ç³»çµ±ç‹€æ…‹
  â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
   t0      (å°±ç·’)                 (å°±ç·’)               âœ… å®‰å…¨

   t1      lock(A) âœ“              lock(B) âœ“            âš ï¸  å±éšª
           [æŒæœ‰ A]               [æŒæœ‰ B]

   t2      try lock(B) â†’ é˜»å¡     try lock(A) â†’ é˜»å¡   ğŸ”´ ä¸å®‰å…¨
           [æŒæœ‰ Aï¼Œç­‰ B]         [æŒæœ‰ Bï¼Œç­‰ A]
           â•”â•â•â•â•â•â•â•â•â•â•â•—           â•”â•â•â•â•â•â•â•â•â•â•â•—
           â•‘  WAITING â•‘           â•‘  WAITING â•‘
           â•šâ•â•â•â•â•â•â•â•â•â•â•           â•šâ•â•â•â•â•â•â•â•â•â•â•

   t3      â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ           â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ         ğŸ’€ æ­»é–
           (æ°¸é ç­‰å¾…)              (æ°¸é ç­‰å¾…)
           CPU ä½”ç”¨ 0%ï¼Œä½†ç„¡æ³•ç¹¼çºŒ

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  é—œéµè½‰æŠ˜ï¼št1â†’t2 æ™‚ï¼Œå…©å€‹åŸ·è¡Œç·’éƒ½å·²ã€ŒæŒæœ‰è³‡æºä¸¦ç­‰å¾…ã€
  ä¸€æ—¦å½¢æˆå¾ªç’°ï¼Œç„¡å¤–éƒ¨å¹²é å‰‡æ°¸ä¸è§£é™¤
</code></pre>
<p>ä¸å®‰å…¨æ’ç¨‹ + è³‡æºç«¶ç”¨ï¼Œé€æ­¥æ»‘å‘æ­»é–ã€‚</p>
<p>æ­»é–çš„å½¢æˆé€šå¸¸æ˜¯é€æ­¥çš„ï¼šç³»çµ±å¾å®‰å…¨ç‹€æ…‹å‡ºç™¼ï¼Œéš¨è‘—åŸ·è¡Œç·’ä¾åºå–å¾—éƒ¨åˆ†è³‡æºï¼Œé€²å…¥ä¸å®‰å…¨ç‹€æ…‹ï¼Œæœ€çµ‚ç•¶æ‰€æœ‰åŸ·è¡Œç·’éƒ½åœ¨ç­‰å¾…å°æ–¹æŒæœ‰çš„è³‡æºæ™‚ï¼Œæ­»é–å®Œæˆã€‚</p>
<h2 id="113-å››å¿…è¦æ¢ä»¶"><a class="header" href="#113-å››å¿…è¦æ¢ä»¶">11.3 å››å¿…è¦æ¢ä»¶</a></h2>
<!-- subsection-diagram -->
<h3 id="æœ¬å°ç¯€ç¤ºæ„åœ–-2"><a class="header" href="#æœ¬å°ç¯€ç¤ºæ„åœ–-2">æœ¬å°ç¯€ç¤ºæ„åœ–</a></h3>
<pre><code class="language-text">  æ­»é–å››å¿…è¦æ¢ä»¶ï¼ˆç¼ºä¸€ä¸å¯ï¼‰

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  æ¢ä»¶ä¸€ï¼šäº’æ–¥ï¼ˆMutual Exclusionï¼‰                               â”‚
  â”‚                                                                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”    åªèƒ½ä¸€äººä½¿ç”¨    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
  â”‚  â”‚ T1ä½”ç”¨ â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚   å»æ‰€     â”‚ â—„â”€â”€ T2 è¢«æ“‹åœ¨å¤–  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚ï¼ˆäº’æ–¥è³‡æºï¼‰â”‚                  â”‚
  â”‚                               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
  â”‚  ç™½è©±ï¼šå»æ‰€åŒæ™‚åªèƒ½ä¸€å€‹äººç”¨ï¼Œè³‡æºä¸èƒ½å…±äº«                       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  æ¢ä»¶äºŒï¼šæŒæœ‰ä¸”ç­‰å¾…ï¼ˆHold and Waitï¼‰                            â”‚
  â”‚                                                                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
  â”‚  â”‚ T1 æ‰‹æ¡ Lock A           â”‚                                 â”‚
  â”‚  â”‚      â””â†’ é‚„è¦ç”³è«‹ Lock B  â”‚  â† ä¸å…ˆæ”¾ Aï¼Œç›´æ¥ç­‰ B           â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
  â”‚  ç™½è©±ï¼šæ‰‹æ‹¿å‰å­ï¼Œé‚„è¦ç­‰ç­·å­ï¼Œä½†ä¸è‚¯æ”¾å‰å­                       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  æ¢ä»¶ä¸‰ï¼šä¸å¯å‰å¥ªï¼ˆNo Preemptionï¼‰                              â”‚
  â”‚                                                                â”‚
  â”‚  OS/æ’ç¨‹å™¨ â”€âœ—â†’ å¼·åˆ¶æ¶èµ° T1 çš„ Lock A                          â”‚
  â”‚                                                                â”‚
  â”‚  åªæœ‰ T1 è‡ªå·± release() æ‰èƒ½é‡‹æ”¾ï¼Œå¤–åŠ›ç„¡æ³•å¼·å–                  â”‚
  â”‚  ç™½è©±ï¼šæ‰‹è£¡çš„æ¼¢å ¡ä¸èƒ½è¢«åˆ¥äººç¡¬æ¶èµ°                               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  æ¢ä»¶å››ï¼šå¾ªç’°ç­‰å¾…ï¼ˆCircular Waitï¼‰                              â”‚
  â”‚                                                                â”‚
  â”‚       T1 â”€â”€ç­‰å¾…â”€â”€â–º Lock B (è¢« T2 æŒæœ‰)                        â”‚
  â”‚        â–²                    â”‚                                  â”‚
  â”‚        â”‚                    â–¼                                  â”‚
  â”‚       Lock A â—„â”€â”€ç­‰å¾…â”€â”€ T2                                     â”‚
  â”‚  (è¢« T1 æŒæœ‰)                                                  â”‚
  â”‚                                                                â”‚
  â”‚  ç™½è©±ï¼šA ç­‰ Bï¼ŒB ç­‰ Aï¼Œç¹æˆä¸€å€‹åœˆ                               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  âš¡ ç ´å£ä»»ä¸€æ¢ä»¶å³å¯é é˜²æ­»é–ï¼
</code></pre>
<p>æ­»é–çš„å››å€‹å¿…è¦æ¢ä»¶ï¼š</p>
<ul>
<li><strong>äº’æ–¥</strong>ï¼šè³‡æºåœ¨æŸæ™‚åˆ»åªèƒ½è¢«ä¸€å€‹åŸ·è¡Œç·’ä½”ç”¨</li>
<li><strong>æŒæœ‰ä¸”ç­‰å¾…</strong>ï¼šåŸ·è¡Œç·’æŒæœ‰è‡³å°‘ä¸€å€‹è³‡æºï¼ŒåŒæ™‚ç­‰å¾…ç²å–å…¶ä»–åŸ·è¡Œç·’æŒæœ‰çš„è³‡æº</li>
<li><strong>ä¸å¯å‰å¥ª</strong>ï¼šå·²åˆ†é…çš„è³‡æºä¸èƒ½è¢«å¼·åˆ¶å¥ªèµ°ï¼Œåªèƒ½ç”±æŒæœ‰è€…ä¸»å‹•é‡‹æ”¾</li>
<li><strong>å¾ªç’°ç­‰å¾…</strong>ï¼šå­˜åœ¨ä¸€å€‹åŸ·è¡Œç·’ç­‰å¾…éˆï¼Œå½¢æˆé–‰åˆè¿´è·¯</li>
</ul>
<p>å››å€‹æ¢ä»¶ç¼ºä¸€ä¸å¯ï¼Œç ´å£å…¶ä¸­ä»»ä½•ä¸€å€‹å³å¯é é˜²æ­»é–ã€‚</p>
<h2 id="114-é é˜²èˆ‡è™•ç†"><a class="header" href="#114-é é˜²èˆ‡è™•ç†">11.4 é é˜²èˆ‡è™•ç†</a></h2>
<!-- subsection-diagram -->
<h3 id="æœ¬å°ç¯€ç¤ºæ„åœ–-3"><a class="header" href="#æœ¬å°ç¯€ç¤ºæ„åœ–-3">æœ¬å°ç¯€ç¤ºæ„åœ–</a></h3>
<pre><code class="language-text">  ä¸‰ç¨®ç­–ç•¥å°æ¯”

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚     ç­–ç•¥         â”‚        åšæ³•               â”‚   ä»£åƒ¹ / é©ç”¨å ´æ™¯    â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ å›ºå®šåŠ é–é †åº     â”‚ æ‰€æœ‰åŸ·è¡Œç·’æŒ‰ç›¸åŒé †åºåŠ é–  â”‚ ä»£åƒ¹ï¼šéœ€å…¨å±€è¦åŠƒé †åº â”‚
  â”‚                  â”‚                           â”‚ é©ç”¨ï¼šé–æ•¸é‡å›ºå®šã€   â”‚
  â”‚ T1: lock(Aâ†’B)    â”‚  â”Œâ”€â”€â”    â”Œâ”€â”€â”            â”‚       é—œä¿‚æ¸…æ™°       â”‚
  â”‚ T2: lock(Aâ†’B)    â”‚  â”‚A â”‚â”€â”€â”€â–ºâ”‚B â”‚            â”‚                      â”‚
  â”‚ (ä¸å†äº¤å‰)       â”‚  â””â”€â”€â”˜    â””â”€â”€â”˜            â”‚ âœ… æœ€å¯é             â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ tryLock + é€¾æ™‚   â”‚ å˜—è©¦åŠ é–ï¼Œè¶…éæœŸé™å°±æ”¾æ£„  â”‚ ä»£åƒ¹ï¼šéœ€è™•ç†å¤±æ•—é‡è©¦ â”‚
  â”‚                  â”‚                           â”‚ é©ç”¨ï¼šé–ç­‰å¾…æ™‚é–“å¯   â”‚
  â”‚ if tryLock(B,    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚       é æœŸã€æ¥­å‹™å…   â”‚
  â”‚   100ms):        â”‚  â”‚å˜—è©¦ 100ms å¾Œ  â”‚        â”‚       è¨±é‡è©¦         â”‚
  â”‚   use B          â”‚  â”‚æ”¾æ£„ï¼Œé‡‹æ”¾ A   â”‚        â”‚                      â”‚
  â”‚ else:            â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚ âš ï¸  å¯èƒ½æ´»é–        â”‚
  â”‚   release A      â”‚                           â”‚                      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ ç¸®å°æŒé–ç¯„åœ     â”‚ ç›¡é‡ç¸®çŸ­æŒé–æ™‚é–“          â”‚ ä»£åƒ¹ï¼šéœ€é‡æ–°è¨­è¨ˆé‚è¼¯ â”‚
  â”‚                  â”‚                           â”‚ é©ç”¨ï¼šæ¥­å‹™é‚è¼¯å¯æ‹†   â”‚
  â”‚ åªåœ¨è®€å¯«å…±äº«     â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚       åˆ†ã€IOæ“ä½œå¤š   â”‚
  â”‚ è³‡æ–™æ™‚æŒé–ï¼Œ     â”‚  â”‚lock â”‚ op â”‚ unlock    â”‚ â”‚                      â”‚
  â”‚ IO ç­‰æ…¢æ“ä½œç§»å‡º  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ âœ… æå‡æ•´é«”ååé‡   â”‚
  â”‚ è‡¨ç•Œå€å¤–         â”‚   çŸ­   çŸ­   çŸ­             â”‚                      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  æ­»é–åµæ¸¬èˆ‡æ¢å¾©ï¼ˆè£œæ•‘æ‰‹æ®µï¼‰ï¼š
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  åµæ¸¬ï¼šå®šæœŸæƒæè³‡æºåˆ†é…åœ–ï¼Œå°‹æ‰¾å¾ªç’°                              â”‚
  â”‚  æ¢å¾©ï¼šé¸æ“‡çŠ§ç‰²è€…ï¼ˆvictimï¼‰â†’ å¼·åˆ¶å›æ»¾æˆ–çµ‚æ­¢ï¼Œé‡‹æ”¾å…¶è³‡æº          â”‚
  â”‚  é©ç”¨ï¼šè³‡æ–™åº«ç³»çµ±ï¼ˆå¦‚ MySQL æ­»é–åµæ¸¬ï¼‰                           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
</code></pre>
<p>ä¸‰ç¨®ä¸»æµé é˜²ç­–ç•¥ï¼š</p>
<ul>
<li><strong>å›ºå®šé–é †åº</strong>ï¼šæ‰€æœ‰åŸ·è¡Œç·’æŒ‰ç›¸åŒçš„å…¨å±€æ’åºä¾åºåŠ é–ï¼Œç¢ºä¿ä¸å­˜åœ¨å¾ªç’°ç­‰å¾…</li>
<li><strong><code>tryLock</code> + timeout</strong>ï¼šå˜—è©¦åŠ é–ï¼Œè¶…æ™‚å¾Œæ”¾æ£„ä¸¦é‡‹æ”¾å·²æŒæœ‰çš„é–ï¼Œå¾…ç¨å¾Œé‡è©¦</li>
<li><strong>æ¸›å°‘æŒé–æ™‚é–“</strong>ï¼šå°‡ä¸éœ€è¦æŒé–çš„æ“ä½œï¼ˆå¦‚ I/Oã€è¨ˆç®—ï¼‰ç§»åˆ°è‡¨ç•Œå€å¤–ï¼Œé™ä½è¡çªè¦–çª—</li>
</ul>
<pre><code class="language-text">T1: lock(A) -&gt; wait(B)
T2: lock(B) -&gt; wait(A)
=&gt; deadlock

ä¿®æ­£å¾Œï¼ˆå›ºå®šé †åºï¼‰:
T1: lock(A) -&gt; lock(B) -&gt; unlock(B) -&gt; unlock(A)
T2: lock(A) -&gt; lock(B) -&gt; unlock(B) -&gt; unlock(A)
=&gt; ä¸å†æœ‰å¾ªç’°ï¼Œæ­»é–ä¸å¯èƒ½ç™¼ç”Ÿ
</code></pre>
<h2 id="è·¨èªè¨€å®Œæ•´ç¯„ä¾‹"><a class="header" href="#è·¨èªè¨€å®Œæ•´ç¯„ä¾‹">è·¨èªè¨€å®Œæ•´ç¯„ä¾‹</a></h2>
<p>å›ºå®šåŠ é–é †åºé¿å…æ­»é–ï¼šå…©æŠŠé–æŒ‰ id æ’åºå¾ŒåŠ é–ï¼Œç„¡è«–åŸ·è¡Œç·’ä»¥ä½•ç¨®é †åºå‘¼å«ï¼Œéƒ½ä¸æœƒå½¢æˆå¾ªç’°ç­‰å¾…ã€‚</p>
<h3 id="c"><a class="header" href="#c">C</a></h3>
<pre><code class="language-c">/* ç·¨è­¯: gcc -O2 -pthread -o ch11_c ch11.c &amp;&amp; ./ch11_c */
#include &lt;stdio.h&gt;
#include &lt;pthread.h&gt;
#include &lt;unistd.h&gt;

typedef struct { int id; pthread_mutex_t mu; } Lock;

/* æŒ‰ id æ’åºå¾ŒåŠ é–ï¼Œç ´å£å¾ªç’°ç­‰å¾…æ¢ä»¶ */
void lock_ordered(Lock *a, Lock *b) {
    if (a-&gt;id &lt; b-&gt;id) {
        pthread_mutex_lock(&amp;a-&gt;mu);
        pthread_mutex_lock(&amp;b-&gt;mu);
    } else {
        pthread_mutex_lock(&amp;b-&gt;mu);
        pthread_mutex_lock(&amp;a-&gt;mu);
    }
}

void unlock_ordered(Lock *a, Lock *b) {
    pthread_mutex_unlock(&amp;a-&gt;mu);
    pthread_mutex_unlock(&amp;b-&gt;mu);
}

Lock res_a = {0, PTHREAD_MUTEX_INITIALIZER};
Lock res_b = {1, PTHREAD_MUTEX_INITIALIZER};
int shared = 0;

void *thread_fn(void *arg) {
    int id = *(int *)arg;
    for (int i = 0; i &lt; 5; i++) {
        lock_ordered(&amp;res_a, &amp;res_b);
        shared++;
        printf("Thread %d: shared = %d\n", id, shared);
        unlock_ordered(&amp;res_a, &amp;res_b);
        usleep(1000);
    }
    return NULL;
}

int main(void) {
    pthread_t t1, t2;
    int id1 = 1, id2 = 2;
    pthread_create(&amp;t1, NULL, thread_fn, &amp;id1);
    pthread_create(&amp;t2, NULL, thread_fn, &amp;id2);
    pthread_join(t1, NULL);
    pthread_join(t2, NULL);
    printf("Final shared = %d\n", shared);
    return 0;
}
</code></pre>
<h3 id="c-1"><a class="header" href="#c-1">C++</a></h3>
<pre><code class="language-cpp">// ç·¨è­¯: g++ -std=c++17 -O2 -pthread -o ch11_cpp ch11.cpp &amp;&amp; ./ch11_cpp
#include &lt;iostream&gt;
#include &lt;mutex&gt;
#include &lt;thread&gt;
#include &lt;vector&gt;

struct OrderedLock {
    int id;
    std::mutex mu;
};

// std::scoped_lock å…§éƒ¨ç”¨ std::lock() å¯¦ä½œæ­»é–å®‰å…¨åŠ é–
void transfer(OrderedLock &amp;from, OrderedLock &amp;to, int &amp;counter) {
    std::scoped_lock lk(from.mu, to.mu);   // åŒæ™‚å®‰å…¨åœ°é–å…©æŠŠ
    counter++;
    std::cout &lt;&lt; "transferred, counter=" &lt;&lt; counter &lt;&lt; "\n";
}

int main() {
    OrderedLock account_a{0, {}};
    OrderedLock account_b{1, {}};
    int counter = 0;
    std::mutex cout_mu;

    std::vector&lt;std::thread&gt; threads;
    for (int i = 0; i &lt; 4; i++) {
        // å¥‡å¶åŸ·è¡Œç·’ä½¿ç”¨ä¸åŒæ–¹å‘ï¼Œä½† scoped_lock ä¿è­‰ä¸æ­»é–
        if (i % 2 == 0)
            threads.emplace_back(transfer, std::ref(account_a),
                                 std::ref(account_b), std::ref(counter));
        else
            threads.emplace_back(transfer, std::ref(account_b),
                                 std::ref(account_a), std::ref(counter));
    }
    for (auto &amp;t : threads) t.join();
    std::cout &lt;&lt; "Final counter=" &lt;&lt; counter &lt;&lt; "\n";
    return 0;
}
</code></pre>
<h3 id="rust"><a class="header" href="#rust">Rust</a></h3>
<pre><pre class="playground"><code class="language-rust">// åŸ·è¡Œ: cargo run æˆ– rustc ch11.rs &amp;&amp; ./ch11
use std::sync::{Arc, Mutex};
use std::thread;

struct Resource {
    id: u32,
    data: Mutex&lt;i32&gt;,
}

// æŒ‰ id æ’åºå¾Œå–é–ï¼Œç¢ºä¿å…¨å±€é †åº
fn locked_update(a: &amp;Resource, b: &amp;Resource) {
    let (first, second) = if a.id &lt; b.id { (a, b) } else { (b, a) };
    let mut g1 = first.data.lock().unwrap();
    let mut g2 = second.data.lock().unwrap();
    *g1 += 1;
    *g2 += 1;
    println!("updated: res[{}]={}, res[{}]={}", first.id, *g1, second.id, *g2);
}

fn main() {
    let res_a = Arc::new(Resource { id: 0, data: Mutex::new(0) });
    let res_b = Arc::new(Resource { id: 1, data: Mutex::new(0) });

    let handles: Vec&lt;_&gt; = (0..4).map(|i| {
        let (a, b) = (Arc::clone(&amp;res_a), Arc::clone(&amp;res_b));
        thread::spawn(move || {
            // ä¸€åŠåŸ·è¡Œç·’å‚³ (a,b)ï¼Œå¦ä¸€åŠå‚³ (b,a)ï¼Œä½†æ’åºä¿è­‰å®‰å…¨
            if i % 2 == 0 { locked_update(&amp;a, &amp;b); }
            else           { locked_update(&amp;b, &amp;a); }
        })
    }).collect();

    for h in handles { h.join().unwrap(); }
    println!("Done, no deadlock.");
}</code></pre></pre>
<h3 id="go"><a class="header" href="#go">Go</a></h3>
<pre><code class="language-go">// åŸ·è¡Œ: go run ch11.go
package main

import (
	"fmt"
	"sync"
)

type Resource struct {
	id int
	mu sync.Mutex
}

// æŒ‰ id æ’åºåŠ é–ï¼Œç ´å£å¾ªç’°ç­‰å¾…
func lockedTransfer(a, b *Resource, counter *int, mu *sync.Mutex) {
	first, second := a, b
	if a.id &gt; b.id {
		first, second = b, a
	}
	first.mu.Lock()
	second.mu.Lock()
	defer first.mu.Unlock()
	defer second.mu.Unlock()

	mu.Lock()
	*counter++
	fmt.Printf("transfer done, counter=%d\n", *counter)
	mu.Unlock()
}

func main() {
	resA := &amp;Resource{id: 0}
	resB := &amp;Resource{id: 1}
	counter := 0
	var printMu sync.Mutex
	var wg sync.WaitGroup

	for i := 0; i &lt; 8; i++ {
		wg.Add(1)
		go func(i int) {
			defer wg.Done()
			if i%2 == 0 {
				lockedTransfer(resA, resB, &amp;counter, &amp;printMu)
			} else {
				lockedTransfer(resB, resA, &amp;counter, &amp;printMu)
			}
		}(i)
	}
	wg.Wait()
	fmt.Printf("Final counter=%d, no deadlock!\n", counter)
}
</code></pre>
<h3 id="python"><a class="header" href="#python">Python</a></h3>
<pre><code class="language-python"># åŸ·è¡Œ: python3 ch11.py
import threading
import time


class OrderedLock:
    def __init__(self, lock_id: int):
        self.id = lock_id
        self.mu = threading.Lock()


def locked_transfer(a: OrderedLock, b: OrderedLock, counter: list):
    """æŒ‰ id æ’åºå¾ŒåŠ é–ï¼Œç¢ºä¿ä¸å½¢æˆå¾ªç’°ç­‰å¾…ã€‚"""
    first, second = (a, b) if a.id &lt; b.id else (b, a)
    with first.mu:
        time.sleep(0.001)          # æ¨¡æ“¬å·¥ä½œï¼Œå¢åŠ ç«¶çˆ­æ©Ÿæœƒ
        with second.mu:
            counter[0] += 1
            print(f"Thread {threading.current_thread().name}: "
                  f"counter={counter[0]}")


if __name__ == "__main__":
    res_a = OrderedLock(0)
    res_b = OrderedLock(1)
    counter = [0]

    threads = []
    for i in range(8):
        # å¥‡å¶åŸ·è¡Œç·’å‚³å…¥é †åºç›¸åï¼Œä½† ordered lock ä¿è­‰å®‰å…¨
        if i % 2 == 0:
            t = threading.Thread(target=locked_transfer,
                                 args=(res_a, res_b, counter), name=f"T{i}")
        else:
            t = threading.Thread(target=locked_transfer,
                                 args=(res_b, res_a, counter), name=f"T{i}")
        threads.append(t)
        t.start()

    for t in threads:
        t.join()
    print(f"Final counter={counter[0]}, no deadlock!")
</code></pre>
<h2 id="å®Œæ•´å°ˆæ¡ˆç´šç¯„ä¾‹python"><a class="header" href="#å®Œæ•´å°ˆæ¡ˆç´šç¯„ä¾‹python">å®Œæ•´å°ˆæ¡ˆç´šç¯„ä¾‹ï¼ˆPythonï¼‰</a></h2>
<p>æª”æ¡ˆï¼š<code>examples/python/ch11.py</code></p>
<pre><code class="language-bash">python3 examples/python/ch11.py
</code></pre>
<pre><code class="language-python">"""Chapter 11: deadlock avoidance via timeout and ordered locking."""
import threading
import time

A = threading.Lock()
B = threading.Lock()


def worker1():
    """æŒæœ‰ A å¾Œå˜—è©¦å– Bï¼Œè¶…æ™‚å‰‡ä¸»å‹•æ”¾æ£„é¿å…æ­»é–ã€‚"""
    with A:
        time.sleep(0.05)
        if B.acquire(timeout=0.1):
            print("w1 got B")
            B.release()
        else:
            print("w1 timeout on B â€” é¿å…æ­»é–ï¼Œç¨å¾Œé‡è©¦")


def worker2():
    """æŒæœ‰ B å¾Œå˜—è©¦å– Aï¼Œè¶…æ™‚å‰‡ä¸»å‹•æ”¾æ£„é¿å…æ­»é–ã€‚"""
    with B:
        time.sleep(0.05)
        if A.acquire(timeout=0.1):
            print("w2 got A")
            A.release()
        else:
            print("w2 timeout on A â€” é¿å…æ­»é–ï¼Œç¨å¾Œé‡è©¦")


if __name__ == "__main__":
    t1 = threading.Thread(target=worker1)
    t2 = threading.Thread(target=worker2)
    t1.start(); t2.start(); t1.join(); t2.join()
    print("ç¨‹å¼æ­£å¸¸çµæŸï¼Œç„¡æ­»é–")
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="ch10-cas.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="ch12-lock-optimization.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="ch10-cas.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="ch12-lock-optimization.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
