<!DOCTYPE HTML>
<html lang="zh-TW" class="light sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>第16章 CAS 自旋鎖實戰 - 高並發編程通用概念（跨 Java/C++/Rust/Go）</title>


        <!-- Custom HTML head -->

        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" id="highlight-css" href="highlight.css">
        <link rel="stylesheet" id="tomorrow-night-css" href="tomorrow-night.css">
        <link rel="stylesheet" id="ayu-highlight-css" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href="theme/ascii-diagram.css">


        <!-- Provide site root and default themes to javascript -->
        <script>
            const path_to_root = "";
            const default_light_theme = "light";
            const default_dark_theme = "navy";
            window.path_to_searchindex_js = "searchindex.js";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="toc.js"></script>
    </head>
    <body>
    <div id="mdbook-help-container">
        <div id="mdbook-help-popup">
            <h2 class="mdbook-help-title">Keyboard shortcuts</h2>
            <div>
                <p>Press <kbd>←</kbd> or <kbd>→</kbd> to navigate between chapters</p>
                <p>Press <kbd>S</kbd> or <kbd>/</kbd> to search in the book</p>
                <p>Press <kbd>?</kbd> to show this help</p>
                <p>Press <kbd>Esc</kbd> to hide this help</p>
            </div>
        </div>
    </div>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                let theme = localStorage.getItem('mdbook-theme');
                let sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            const default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? default_dark_theme : default_light_theme;
            let theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            let sidebar = null;
            const sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
                sidebar_toggle.checked = false;
            }
            if (sidebar === 'visible') {
                sidebar_toggle.checked = true;
            } else {
                html.classList.remove('sidebar-visible');
            }
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="default_theme">Auto</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search (`/`)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="/ s" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">高並發編程通用概念（跨 Java/C++/Rust/Go）</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <div class="search-wrapper">
                            <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                            <div class="spinner-wrapper">
                                <i class="fa fa-spinner fa-spin"></i>
                            </div>
                        </div>
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="第16章-cas-自旋鎖實戰"><a class="header" href="#第16章-cas-自旋鎖實戰">第16章 CAS 自旋鎖實戰</a></h1>
<h2 id="161-目標"><a class="header" href="#161-目標">16.1 目標</a></h2>
<!-- subsection-diagram -->
<h3 id="本小節示意圖"><a class="header" href="#本小節示意圖">本小節示意圖</a></h3>
<div class="ascii-svg-wrap">
<svg class="ascii-svg" xmlns="http://www.w3.org/2000/svg" width="718" height="684" viewBox="0 0 718 684" role="img" aria-label="ASCII diagram">
<g fill="currentColor" font-family="Noto Sans Mono CJK TC, Noto Sans Mono CJK SC, Noto Sans Mono CJK JP, Sarasa Mono TC, Cascadia Mono, JetBrains Mono, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, monospace" font-size="16" text-rendering="geometricPrecision" xml:space="preserve">
<text x="14" y="14">三</text>
<text x="34" y="14">種</text>
<text x="54" y="14">鎖</text>
<text x="74" y="14">模</text>
<text x="94" y="14">式</text>
<text x="114" y="14">對</text>
<text x="134" y="14">比</text>
<text x="14" y="54">┌</text>
<text x="24" y="54">─</text>
<text x="34" y="54">─</text>
<text x="44" y="54">─</text>
<text x="54" y="54">─</text>
<text x="64" y="54">─</text>
<text x="74" y="54">─</text>
<text x="84" y="54">─</text>
<text x="94" y="54">─</text>
<text x="104" y="54">─</text>
<text x="114" y="54">─</text>
<text x="124" y="54">─</text>
<text x="134" y="54">─</text>
<text x="144" y="54">─</text>
<text x="154" y="54">─</text>
<text x="164" y="54">─</text>
<text x="174" y="54">─</text>
<text x="184" y="54">─</text>
<text x="194" y="54">─</text>
<text x="204" y="54">─</text>
<text x="214" y="54">─</text>
<text x="224" y="54">─</text>
<text x="234" y="54">─</text>
<text x="244" y="54">─</text>
<text x="254" y="54">─</text>
<text x="264" y="54">─</text>
<text x="274" y="54">─</text>
<text x="284" y="54">─</text>
<text x="294" y="54">─</text>
<text x="304" y="54">─</text>
<text x="314" y="54">─</text>
<text x="324" y="54">─</text>
<text x="334" y="54">─</text>
<text x="344" y="54">─</text>
<text x="354" y="54">─</text>
<text x="364" y="54">─</text>
<text x="374" y="54">─</text>
<text x="384" y="54">─</text>
<text x="394" y="54">─</text>
<text x="404" y="54">─</text>
<text x="414" y="54">─</text>
<text x="424" y="54">─</text>
<text x="434" y="54">─</text>
<text x="444" y="54">─</text>
<text x="454" y="54">─</text>
<text x="464" y="54">─</text>
<text x="474" y="54">─</text>
<text x="484" y="54">─</text>
<text x="494" y="54">─</text>
<text x="504" y="54">─</text>
<text x="514" y="54">─</text>
<text x="524" y="54">─</text>
<text x="534" y="54">─</text>
<text x="544" y="54">─</text>
<text x="554" y="54">─</text>
<text x="564" y="54">─</text>
<text x="574" y="54">─</text>
<text x="584" y="54">─</text>
<text x="594" y="54">─</text>
<text x="604" y="54">─</text>
<text x="614" y="54">─</text>
<text x="624" y="54">─</text>
<text x="634" y="54">─</text>
<text x="644" y="54">─</text>
<text x="654" y="54">─</text>
<text x="664" y="54">─</text>
<text x="674" y="54">─</text>
<text x="684" y="54">─</text>
<text x="694" y="54">┐</text>
<text x="14" y="74">│</text>
<text x="254" y="74">鎖</text>
<text x="274" y="74">模</text>
<text x="294" y="74">式</text>
<text x="314" y="74">適</text>
<text x="334" y="74">用</text>
<text x="354" y="74">場</text>
<text x="374" y="74">景</text>
<text x="394" y="74">比</text>
<text x="414" y="74">較</text>
<text x="694" y="74">│</text>
<text x="14" y="94">├</text>
<text x="24" y="94">─</text>
<text x="34" y="94">─</text>
<text x="44" y="94">─</text>
<text x="54" y="94">─</text>
<text x="64" y="94">─</text>
<text x="74" y="94">─</text>
<text x="84" y="94">─</text>
<text x="94" y="94">─</text>
<text x="104" y="94">─</text>
<text x="114" y="94">─</text>
<text x="124" y="94">─</text>
<text x="134" y="94">─</text>
<text x="144" y="94">─</text>
<text x="154" y="94">─</text>
<text x="164" y="94">─</text>
<text x="174" y="94">┬</text>
<text x="184" y="94">─</text>
<text x="194" y="94">─</text>
<text x="204" y="94">─</text>
<text x="214" y="94">─</text>
<text x="224" y="94">─</text>
<text x="234" y="94">─</text>
<text x="244" y="94">─</text>
<text x="254" y="94">─</text>
<text x="264" y="94">─</text>
<text x="274" y="94">─</text>
<text x="284" y="94">─</text>
<text x="294" y="94">─</text>
<text x="304" y="94">─</text>
<text x="314" y="94">─</text>
<text x="324" y="94">─</text>
<text x="334" y="94">┬</text>
<text x="344" y="94">─</text>
<text x="354" y="94">─</text>
<text x="364" y="94">─</text>
<text x="374" y="94">─</text>
<text x="384" y="94">─</text>
<text x="394" y="94">─</text>
<text x="404" y="94">─</text>
<text x="414" y="94">─</text>
<text x="424" y="94">─</text>
<text x="434" y="94">─</text>
<text x="444" y="94">─</text>
<text x="454" y="94">─</text>
<text x="464" y="94">─</text>
<text x="474" y="94">─</text>
<text x="484" y="94">─</text>
<text x="494" y="94">─</text>
<text x="504" y="94">─</text>
<text x="514" y="94">─</text>
<text x="524" y="94">─</text>
<text x="534" y="94">─</text>
<text x="544" y="94">─</text>
<text x="554" y="94">─</text>
<text x="564" y="94">─</text>
<text x="574" y="94">─</text>
<text x="584" y="94">─</text>
<text x="594" y="94">─</text>
<text x="604" y="94">─</text>
<text x="614" y="94">─</text>
<text x="624" y="94">─</text>
<text x="634" y="94">─</text>
<text x="644" y="94">─</text>
<text x="654" y="94">─</text>
<text x="664" y="94">─</text>
<text x="674" y="94">─</text>
<text x="684" y="94">─</text>
<text x="694" y="94">┤</text>
<text x="14" y="114">│</text>
<text x="44" y="114">L</text>
<text x="54" y="114">o</text>
<text x="64" y="114">c</text>
<text x="74" y="114">k</text>
<text x="84" y="114">-</text>
<text x="94" y="114">f</text>
<text x="104" y="114">r</text>
<text x="114" y="114">e</text>
<text x="124" y="114">e</text>
<text x="174" y="114">│</text>
<text x="214" y="114">S</text>
<text x="224" y="114">p</text>
<text x="234" y="114">i</text>
<text x="244" y="114">n</text>
<text x="264" y="114">L</text>
<text x="274" y="114">o</text>
<text x="284" y="114">c</text>
<text x="294" y="114">k</text>
<text x="334" y="114">│</text>
<text x="444" y="114">O</text>
<text x="454" y="114">S</text>
<text x="474" y="114">M</text>
<text x="484" y="114">u</text>
<text x="494" y="114">t</text>
<text x="504" y="114">e</text>
<text x="514" y="114">x</text>
<text x="694" y="114">│</text>
<text x="14" y="134">│</text>
<text x="74" y="134">C</text>
<text x="84" y="134">A</text>
<text x="94" y="134">S</text>
<text x="194" y="134">│</text>
<text x="354" y="134">│</text>
<text x="694" y="134">│</text>
<text x="14" y="154">├</text>
<text x="24" y="154">─</text>
<text x="34" y="154">─</text>
<text x="44" y="154">─</text>
<text x="54" y="154">─</text>
<text x="64" y="154">─</text>
<text x="74" y="154">─</text>
<text x="84" y="154">─</text>
<text x="94" y="154">─</text>
<text x="104" y="154">─</text>
<text x="114" y="154">─</text>
<text x="124" y="154">─</text>
<text x="134" y="154">─</text>
<text x="144" y="154">─</text>
<text x="154" y="154">─</text>
<text x="164" y="154">─</text>
<text x="174" y="154">┼</text>
<text x="184" y="154">─</text>
<text x="194" y="154">─</text>
<text x="204" y="154">─</text>
<text x="214" y="154">─</text>
<text x="224" y="154">─</text>
<text x="234" y="154">─</text>
<text x="244" y="154">─</text>
<text x="254" y="154">─</text>
<text x="264" y="154">─</text>
<text x="274" y="154">─</text>
<text x="284" y="154">─</text>
<text x="294" y="154">─</text>
<text x="304" y="154">─</text>
<text x="314" y="154">─</text>
<text x="324" y="154">─</text>
<text x="334" y="154">┼</text>
<text x="344" y="154">─</text>
<text x="354" y="154">─</text>
<text x="364" y="154">─</text>
<text x="374" y="154">─</text>
<text x="384" y="154">─</text>
<text x="394" y="154">─</text>
<text x="404" y="154">─</text>
<text x="414" y="154">─</text>
<text x="424" y="154">─</text>
<text x="434" y="154">─</text>
<text x="444" y="154">─</text>
<text x="454" y="154">─</text>
<text x="464" y="154">─</text>
<text x="474" y="154">─</text>
<text x="484" y="154">─</text>
<text x="494" y="154">─</text>
<text x="504" y="154">─</text>
<text x="514" y="154">─</text>
<text x="524" y="154">─</text>
<text x="534" y="154">─</text>
<text x="544" y="154">─</text>
<text x="554" y="154">─</text>
<text x="564" y="154">─</text>
<text x="574" y="154">─</text>
<text x="584" y="154">─</text>
<text x="594" y="154">─</text>
<text x="604" y="154">─</text>
<text x="614" y="154">─</text>
<text x="624" y="154">─</text>
<text x="634" y="154">─</text>
<text x="644" y="154">─</text>
<text x="654" y="154">─</text>
<text x="664" y="154">─</text>
<text x="674" y="154">─</text>
<text x="684" y="154">─</text>
<text x="694" y="154">┤</text>
<text x="14" y="174">│</text>
<text x="44" y="174">無</text>
<text x="64" y="174">阻</text>
<text x="84" y="174">塞</text>
<text x="174" y="174">│</text>
<text x="204" y="174">短</text>
<text x="224" y="174">臨</text>
<text x="244" y="174">界</text>
<text x="264" y="174">區</text>
<text x="334" y="174">│</text>
<text x="364" y="174">長</text>
<text x="384" y="174">臨</text>
<text x="404" y="174">界</text>
<text x="424" y="174">區</text>
<text x="694" y="174">│</text>
<text x="14" y="194">│</text>
<text x="44" y="194">全</text>
<text x="64" y="194">自</text>
<text x="84" y="194">旋</text>
<text x="174" y="194">│</text>
<text x="204" y="194">適</text>
<text x="224" y="194">合</text>
<text x="244" y="194">高</text>
<text x="264" y="194">頻</text>
<text x="284" y="194">鎖</text>
<text x="334" y="194">│</text>
<text x="364" y="194">適</text>
<text x="384" y="194">合</text>
<text x="414" y="194">I</text>
<text x="424" y="194">/</text>
<text x="434" y="194">O</text>
<text x="444" y="194">、</text>
<text x="464" y="194">D</text>
<text x="474" y="194">B</text>
<text x="494" y="194">等</text>
<text x="514" y="194">耗</text>
<text x="534" y="194">時</text>
<text x="554" y="194">操</text>
<text x="574" y="194">作</text>
<text x="694" y="194">│</text>
<text x="34" y="214">│</text>
<text x="194" y="214">│</text>
<text x="354" y="214">│</text>
<text x="694" y="214">│</text>
<text x="14" y="234">│</text>
<text x="44" y="234">C</text>
<text x="54" y="234">P</text>
<text x="64" y="234">U</text>
<text x="84" y="234">一</text>
<text x="104" y="234">直</text>
<text x="124" y="234">轉</text>
<text x="174" y="234">│</text>
<text x="204" y="234">等</text>
<text x="224" y="234">待</text>
<text x="244" y="234">期</text>
<text x="264" y="234">間</text>
<text x="334" y="234">│</text>
<text x="364" y="234">等</text>
<text x="384" y="234">待</text>
<text x="404" y="234">時</text>
<text x="424" y="234">讓</text>
<text x="444" y="234">出</text>
<text x="474" y="234">C</text>
<text x="484" y="234">P</text>
<text x="494" y="234">U</text>
<text x="694" y="234">│</text>
<text x="14" y="254">│</text>
<text x="44" y="254">不</text>
<text x="64" y="254">切</text>
<text x="84" y="254">換</text>
<text x="104" y="254">執</text>
<text x="124" y="254">行</text>
<text x="144" y="254">緒</text>
<text x="174" y="254">│</text>
<text x="204" y="254">C</text>
<text x="214" y="254">P</text>
<text x="224" y="254">U</text>
<text x="244" y="254">仍</text>
<text x="264" y="254">在</text>
<text x="284" y="254">燃</text>
<text x="304" y="254">燒</text>
<text x="334" y="254">│</text>
<text x="364" y="254">有</text>
<text x="384" y="254">上</text>
<text x="404" y="254">下</text>
<text x="424" y="254">文</text>
<text x="444" y="254">切</text>
<text x="464" y="254">換</text>
<text x="484" y="254">開</text>
<text x="504" y="254">銷</text>
<text x="694" y="254">│</text>
<text x="14" y="274">├</text>
<text x="24" y="274">─</text>
<text x="34" y="274">─</text>
<text x="44" y="274">─</text>
<text x="54" y="274">─</text>
<text x="64" y="274">─</text>
<text x="74" y="274">─</text>
<text x="84" y="274">─</text>
<text x="94" y="274">─</text>
<text x="104" y="274">─</text>
<text x="114" y="274">─</text>
<text x="124" y="274">─</text>
<text x="134" y="274">─</text>
<text x="144" y="274">─</text>
<text x="154" y="274">─</text>
<text x="164" y="274">─</text>
<text x="174" y="274">┼</text>
<text x="184" y="274">─</text>
<text x="194" y="274">─</text>
<text x="204" y="274">─</text>
<text x="214" y="274">─</text>
<text x="224" y="274">─</text>
<text x="234" y="274">─</text>
<text x="244" y="274">─</text>
<text x="254" y="274">─</text>
<text x="264" y="274">─</text>
<text x="274" y="274">─</text>
<text x="284" y="274">─</text>
<text x="294" y="274">─</text>
<text x="304" y="274">─</text>
<text x="314" y="274">─</text>
<text x="324" y="274">─</text>
<text x="334" y="274">┼</text>
<text x="344" y="274">─</text>
<text x="354" y="274">─</text>
<text x="364" y="274">─</text>
<text x="374" y="274">─</text>
<text x="384" y="274">─</text>
<text x="394" y="274">─</text>
<text x="404" y="274">─</text>
<text x="414" y="274">─</text>
<text x="424" y="274">─</text>
<text x="434" y="274">─</text>
<text x="444" y="274">─</text>
<text x="454" y="274">─</text>
<text x="464" y="274">─</text>
<text x="474" y="274">─</text>
<text x="484" y="274">─</text>
<text x="494" y="274">─</text>
<text x="504" y="274">─</text>
<text x="514" y="274">─</text>
<text x="524" y="274">─</text>
<text x="534" y="274">─</text>
<text x="544" y="274">─</text>
<text x="554" y="274">─</text>
<text x="564" y="274">─</text>
<text x="574" y="274">─</text>
<text x="584" y="274">─</text>
<text x="594" y="274">─</text>
<text x="604" y="274">─</text>
<text x="614" y="274">─</text>
<text x="624" y="274">─</text>
<text x="634" y="274">─</text>
<text x="644" y="274">─</text>
<text x="654" y="274">─</text>
<text x="664" y="274">─</text>
<text x="674" y="274">─</text>
<text x="684" y="274">─</text>
<text x="694" y="274">┤</text>
<text x="14" y="294">│</text>
<text x="44" y="294">臨</text>
<text x="64" y="294">界</text>
<text x="84" y="294">區</text>
<text x="104" y="294">極</text>
<text x="124" y="294">短</text>
<text x="174" y="294">│</text>
<text x="204" y="294">臨</text>
<text x="224" y="294">界</text>
<text x="244" y="294">區</text>
<text x="274" y="294">&lt;</text>
<text x="294" y="294">幾</text>
<text x="334" y="294">│</text>
<text x="364" y="294">臨</text>
<text x="384" y="294">界</text>
<text x="404" y="294">區</text>
<text x="434" y="294">&gt;</text>
<text x="454" y="294">幾</text>
<text x="474" y="294">微</text>
<text x="494" y="294">秒</text>
<text x="694" y="294">│</text>
<text x="14" y="314">│</text>
<text x="44" y="314">衝</text>
<text x="64" y="314">突</text>
<text x="84" y="314">極</text>
<text x="104" y="314">低</text>
<text x="174" y="314">│</text>
<text x="204" y="314">微</text>
<text x="224" y="314">秒</text>
<text x="244" y="314">，</text>
<text x="264" y="314">低</text>
<text x="284" y="314">衝</text>
<text x="304" y="314">突</text>
<text x="334" y="314">│</text>
<text x="364" y="314">衝</text>
<text x="384" y="314">突</text>
<text x="404" y="314">較</text>
<text x="424" y="314">高</text>
<text x="694" y="314">│</text>
<text x="14" y="334">│</text>
<text x="44" y="334">適</text>
<text x="64" y="334">合</text>
<text x="84" y="334">計</text>
<text x="104" y="334">數</text>
<text x="124" y="334">器</text>
<text x="174" y="334">│</text>
<text x="204" y="334">適</text>
<text x="224" y="334">合</text>
<text x="254" y="334">c</text>
<text x="264" y="334">a</text>
<text x="274" y="334">c</text>
<text x="284" y="334">h</text>
<text x="294" y="334">e</text>
<text x="334" y="334">│</text>
<text x="364" y="334">適</text>
<text x="384" y="334">合</text>
<text x="404" y="334">資</text>
<text x="424" y="334">料</text>
<text x="444" y="334">庫</text>
<text x="464" y="334">操</text>
<text x="484" y="334">作</text>
<text x="694" y="334">│</text>
<text x="14" y="354">├</text>
<text x="24" y="354">─</text>
<text x="34" y="354">─</text>
<text x="44" y="354">─</text>
<text x="54" y="354">─</text>
<text x="64" y="354">─</text>
<text x="74" y="354">─</text>
<text x="84" y="354">─</text>
<text x="94" y="354">─</text>
<text x="104" y="354">─</text>
<text x="114" y="354">─</text>
<text x="124" y="354">─</text>
<text x="134" y="354">─</text>
<text x="144" y="354">─</text>
<text x="154" y="354">─</text>
<text x="164" y="354">─</text>
<text x="174" y="354">┼</text>
<text x="184" y="354">─</text>
<text x="194" y="354">─</text>
<text x="204" y="354">─</text>
<text x="214" y="354">─</text>
<text x="224" y="354">─</text>
<text x="234" y="354">─</text>
<text x="244" y="354">─</text>
<text x="254" y="354">─</text>
<text x="264" y="354">─</text>
<text x="274" y="354">─</text>
<text x="284" y="354">─</text>
<text x="294" y="354">─</text>
<text x="304" y="354">─</text>
<text x="314" y="354">─</text>
<text x="324" y="354">─</text>
<text x="334" y="354">┼</text>
<text x="344" y="354">─</text>
<text x="354" y="354">─</text>
<text x="364" y="354">─</text>
<text x="374" y="354">─</text>
<text x="384" y="354">─</text>
<text x="394" y="354">─</text>
<text x="404" y="354">─</text>
<text x="414" y="354">─</text>
<text x="424" y="354">─</text>
<text x="434" y="354">─</text>
<text x="444" y="354">─</text>
<text x="454" y="354">─</text>
<text x="464" y="354">─</text>
<text x="474" y="354">─</text>
<text x="484" y="354">─</text>
<text x="494" y="354">─</text>
<text x="504" y="354">─</text>
<text x="514" y="354">─</text>
<text x="524" y="354">─</text>
<text x="534" y="354">─</text>
<text x="544" y="354">─</text>
<text x="554" y="354">─</text>
<text x="564" y="354">─</text>
<text x="574" y="354">─</text>
<text x="584" y="354">─</text>
<text x="594" y="354">─</text>
<text x="604" y="354">─</text>
<text x="614" y="354">─</text>
<text x="624" y="354">─</text>
<text x="634" y="354">─</text>
<text x="644" y="354">─</text>
<text x="654" y="354">─</text>
<text x="664" y="354">─</text>
<text x="674" y="354">─</text>
<text x="684" y="354">─</text>
<text x="694" y="354">┤</text>
<text x="34" y="374">│</text>
<text x="194" y="374">│</text>
<text x="354" y="374">│</text>
<text x="694" y="374">│</text>
<text x="14" y="394">│</text>
<text x="44" y="394">●</text>
<text x="54" y="394">●</text>
<text x="64" y="394">●</text>
<text x="74" y="394">●</text>
<text x="84" y="394">●</text>
<text x="174" y="394">│</text>
<text x="204" y="394">●</text>
<text x="214" y="394">●</text>
<text x="224" y="394">●</text>
<text x="234" y="394">○</text>
<text x="244" y="394">○</text>
<text x="334" y="394">│</text>
<text x="364" y="394">●</text>
<text x="374" y="394">○</text>
<text x="384" y="394">○</text>
<text x="394" y="394">○</text>
<text x="404" y="394">○</text>
<text x="694" y="394">│</text>
<text x="14" y="414">│</text>
<text x="44" y="414">C</text>
<text x="54" y="414">P</text>
<text x="64" y="414">U</text>
<text x="84" y="414">效</text>
<text x="104" y="414">率</text>
<text x="174" y="414">│</text>
<text x="204" y="414">C</text>
<text x="214" y="414">P</text>
<text x="224" y="414">U</text>
<text x="244" y="414">效</text>
<text x="264" y="414">率</text>
<text x="334" y="414">│</text>
<text x="364" y="414">C</text>
<text x="374" y="414">P</text>
<text x="384" y="414">U</text>
<text x="404" y="414">效</text>
<text x="424" y="414">率</text>
<text x="694" y="414">│</text>
<text x="14" y="434">│</text>
<text x="44" y="434">(</text>
<text x="54" y="434">高</text>
<text x="74" y="434">衝</text>
<text x="94" y="434">突</text>
<text x="114" y="434">時</text>
<text x="134" y="434">差</text>
<text x="154" y="434">)</text>
<text x="174" y="434">│</text>
<text x="204" y="434">(</text>
<text x="214" y="434">中</text>
<text x="234" y="434">度</text>
<text x="254" y="434">場</text>
<text x="274" y="434">景</text>
<text x="294" y="434">佳</text>
<text x="314" y="434">)</text>
<text x="334" y="434">│</text>
<text x="364" y="434">(</text>
<text x="374" y="434">等</text>
<text x="394" y="434">待</text>
<text x="414" y="434">時</text>
<text x="434" y="434">釋</text>
<text x="454" y="434">放</text>
<text x="474" y="434">C</text>
<text x="484" y="434">P</text>
<text x="494" y="434">U</text>
<text x="504" y="434">)</text>
<text x="694" y="434">│</text>
<text x="14" y="454">└</text>
<text x="24" y="454">─</text>
<text x="34" y="454">─</text>
<text x="44" y="454">─</text>
<text x="54" y="454">─</text>
<text x="64" y="454">─</text>
<text x="74" y="454">─</text>
<text x="84" y="454">─</text>
<text x="94" y="454">─</text>
<text x="104" y="454">─</text>
<text x="114" y="454">─</text>
<text x="124" y="454">─</text>
<text x="134" y="454">─</text>
<text x="144" y="454">─</text>
<text x="154" y="454">─</text>
<text x="164" y="454">─</text>
<text x="174" y="454">┴</text>
<text x="184" y="454">─</text>
<text x="194" y="454">─</text>
<text x="204" y="454">─</text>
<text x="214" y="454">─</text>
<text x="224" y="454">─</text>
<text x="234" y="454">─</text>
<text x="244" y="454">─</text>
<text x="254" y="454">─</text>
<text x="264" y="454">─</text>
<text x="274" y="454">─</text>
<text x="284" y="454">─</text>
<text x="294" y="454">─</text>
<text x="304" y="454">─</text>
<text x="314" y="454">─</text>
<text x="324" y="454">─</text>
<text x="334" y="454">┴</text>
<text x="344" y="454">─</text>
<text x="354" y="454">─</text>
<text x="364" y="454">─</text>
<text x="374" y="454">─</text>
<text x="384" y="454">─</text>
<text x="394" y="454">─</text>
<text x="404" y="454">─</text>
<text x="414" y="454">─</text>
<text x="424" y="454">─</text>
<text x="434" y="454">─</text>
<text x="444" y="454">─</text>
<text x="454" y="454">─</text>
<text x="464" y="454">─</text>
<text x="474" y="454">─</text>
<text x="484" y="454">─</text>
<text x="494" y="454">─</text>
<text x="504" y="454">─</text>
<text x="514" y="454">─</text>
<text x="524" y="454">─</text>
<text x="534" y="454">─</text>
<text x="544" y="454">─</text>
<text x="554" y="454">─</text>
<text x="564" y="454">─</text>
<text x="574" y="454">─</text>
<text x="584" y="454">─</text>
<text x="594" y="454">─</text>
<text x="604" y="454">─</text>
<text x="614" y="454">─</text>
<text x="624" y="454">─</text>
<text x="634" y="454">─</text>
<text x="644" y="454">─</text>
<text x="654" y="454">─</text>
<text x="664" y="454">─</text>
<text x="674" y="454">─</text>
<text x="684" y="454">─</text>
<text x="694" y="454">┘</text>
<text x="14" y="494">適</text>
<text x="34" y="494">用</text>
<text x="54" y="494">場</text>
<text x="74" y="494">景</text>
<text x="94" y="494">判</text>
<text x="114" y="494">斷</text>
<text x="134" y="494">流</text>
<text x="154" y="494">程</text>
<text x="174" y="494">：</text>
<text x="34" y="534">臨</text>
<text x="54" y="534">界</text>
<text x="74" y="534">區</text>
<text x="94" y="534">有</text>
<text x="114" y="534">多</text>
<text x="134" y="534">長</text>
<text x="154" y="534">？</text>
<text x="694" y="554">│</text>
<text x="84" y="574">├</text>
<text x="94" y="574">─</text>
<text x="104" y="574">─</text>
<text x="114" y="574">─</text>
<text x="134" y="574">&lt;</text>
<text x="154" y="574">1</text>
<text x="174" y="574">微</text>
<text x="194" y="574">秒</text>
<text x="224" y="574">─</text>
<text x="234" y="574">─</text>
<text x="244" y="574">→</text>
<text x="264" y="574">C</text>
<text x="274" y="574">A</text>
<text x="284" y="574">S</text>
<text x="304" y="574">/</text>
<text x="324" y="574">L</text>
<text x="334" y="574">o</text>
<text x="344" y="574">c</text>
<text x="354" y="574">k</text>
<text x="364" y="574">-</text>
<text x="374" y="574">f</text>
<text x="384" y="574">r</text>
<text x="394" y="574">e</text>
<text x="404" y="574">e</text>
<text x="414" y="574">（</text>
<text x="434" y="574">無</text>
<text x="454" y="574">鎖</text>
<text x="474" y="574">化</text>
<text x="494" y="574">）</text>
<text x="694" y="594">│</text>
<text x="84" y="614">├</text>
<text x="94" y="614">─</text>
<text x="104" y="614">─</text>
<text x="114" y="614">─</text>
<text x="134" y="614">1</text>
<text x="144" y="614">~</text>
<text x="154" y="614">1</text>
<text x="164" y="614">0</text>
<text x="184" y="614">微</text>
<text x="204" y="614">秒</text>
<text x="234" y="614">─</text>
<text x="244" y="614">─</text>
<text x="254" y="614">→</text>
<text x="274" y="614">S</text>
<text x="284" y="614">p</text>
<text x="294" y="614">i</text>
<text x="304" y="614">n</text>
<text x="324" y="614">L</text>
<text x="334" y="614">o</text>
<text x="344" y="614">c</text>
<text x="354" y="614">k</text>
<text x="364" y="614">（</text>
<text x="384" y="614">自</text>
<text x="404" y="614">旋</text>
<text x="424" y="614">）</text>
<text x="694" y="634">│</text>
<text x="84" y="654">└</text>
<text x="94" y="654">─</text>
<text x="104" y="654">─</text>
<text x="114" y="654">─</text>
<text x="134" y="654">&gt;</text>
<text x="154" y="654">1</text>
<text x="164" y="654">0</text>
<text x="184" y="654">微</text>
<text x="204" y="654">秒</text>
<text x="234" y="654">─</text>
<text x="244" y="654">─</text>
<text x="254" y="654">→</text>
<text x="274" y="654">O</text>
<text x="284" y="654">S</text>
<text x="304" y="654">M</text>
<text x="314" y="654">u</text>
<text x="324" y="654">t</text>
<text x="334" y="654">e</text>
<text x="344" y="654">x</text>
<text x="354" y="654">（</text>
<text x="374" y="654">阻</text>
<text x="394" y="654">塞</text>
<text x="414" y="654">等</text>
<text x="434" y="654">待</text>
<text x="454" y="654">）</text>
</g>
</svg>
</div>
<p>用最少原語實作可用鎖，理解 lock-free 與 spin 的邊界。</p>
<h2 id="162-核心做法"><a class="header" href="#162-核心做法">16.2 核心做法</a></h2>
<!-- subsection-diagram -->
<h3 id="本小節示意圖-1"><a class="header" href="#本小節示意圖-1">本小節示意圖</a></h3>
<div class="ascii-svg-wrap">
<svg class="ascii-svg" xmlns="http://www.w3.org/2000/svg" width="688" height="964" viewBox="0 0 688 964" role="img" aria-label="ASCII diagram">
<g fill="currentColor" font-family="Noto Sans Mono CJK TC, Noto Sans Mono CJK SC, Noto Sans Mono CJK JP, Sarasa Mono TC, Cascadia Mono, JetBrains Mono, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, monospace" font-size="16" text-rendering="geometricPrecision" xml:space="preserve">
<text x="14" y="14">自</text>
<text x="34" y="14">旋</text>
<text x="54" y="14">鎖</text>
<text x="84" y="14">C</text>
<text x="94" y="14">A</text>
<text x="104" y="14">S</text>
<text x="124" y="14">流</text>
<text x="144" y="14">程</text>
<text x="164" y="14">圖</text>
<text x="34" y="54">f</text>
<text x="44" y="54">l</text>
<text x="54" y="54">a</text>
<text x="64" y="54">g</text>
<text x="84" y="54">=</text>
<text x="104" y="54">0</text>
<text x="114" y="54">（</text>
<text x="134" y="54">f</text>
<text x="144" y="54">r</text>
<text x="154" y="54">e</text>
<text x="164" y="54">e</text>
<text x="174" y="54">）</text>
<text x="214" y="54">f</text>
<text x="224" y="54">l</text>
<text x="234" y="54">a</text>
<text x="244" y="54">g</text>
<text x="264" y="54">=</text>
<text x="284" y="54">1</text>
<text x="294" y="54">（</text>
<text x="314" y="54">h</text>
<text x="324" y="54">e</text>
<text x="334" y="54">l</text>
<text x="344" y="54">d</text>
<text x="354" y="54">）</text>
<text x="34" y="94">┌</text>
<text x="44" y="94">─</text>
<text x="54" y="94">─</text>
<text x="64" y="94">─</text>
<text x="74" y="94">─</text>
<text x="84" y="94">─</text>
<text x="94" y="94">─</text>
<text x="104" y="94">─</text>
<text x="114" y="94">─</text>
<text x="124" y="94">─</text>
<text x="134" y="94">─</text>
<text x="144" y="94">─</text>
<text x="154" y="94">─</text>
<text x="164" y="94">─</text>
<text x="174" y="94">─</text>
<text x="184" y="94">─</text>
<text x="194" y="94">─</text>
<text x="204" y="94">─</text>
<text x="214" y="94">─</text>
<text x="224" y="94">─</text>
<text x="234" y="94">─</text>
<text x="244" y="94">─</text>
<text x="254" y="94">─</text>
<text x="264" y="94">─</text>
<text x="274" y="94">─</text>
<text x="284" y="94">─</text>
<text x="294" y="94">─</text>
<text x="304" y="94">─</text>
<text x="314" y="94">─</text>
<text x="324" y="94">─</text>
<text x="334" y="94">─</text>
<text x="344" y="94">─</text>
<text x="354" y="94">─</text>
<text x="364" y="94">─</text>
<text x="374" y="94">─</text>
<text x="384" y="94">─</text>
<text x="394" y="94">─</text>
<text x="404" y="94">─</text>
<text x="414" y="94">─</text>
<text x="424" y="94">─</text>
<text x="434" y="94">─</text>
<text x="444" y="94">─</text>
<text x="454" y="94">─</text>
<text x="464" y="94">─</text>
<text x="474" y="94">─</text>
<text x="484" y="94">─</text>
<text x="494" y="94">─</text>
<text x="504" y="94">─</text>
<text x="514" y="94">─</text>
<text x="524" y="94">─</text>
<text x="534" y="94">─</text>
<text x="544" y="94">─</text>
<text x="554" y="94">─</text>
<text x="564" y="94">─</text>
<text x="574" y="94">─</text>
<text x="584" y="94">─</text>
<text x="594" y="94">─</text>
<text x="604" y="94">─</text>
<text x="614" y="94">─</text>
<text x="624" y="94">─</text>
<text x="634" y="94">─</text>
<text x="644" y="94">─</text>
<text x="654" y="94">─</text>
<text x="664" y="94">┐</text>
<text x="34" y="114">│</text>
<text x="64" y="114">a</text>
<text x="74" y="114">t</text>
<text x="84" y="114">o</text>
<text x="94" y="114">m</text>
<text x="104" y="114">i</text>
<text x="114" y="114">c</text>
<text x="124" y="114">_</text>
<text x="134" y="114">f</text>
<text x="144" y="114">l</text>
<text x="154" y="114">a</text>
<text x="164" y="114">g</text>
<text x="184" y="114">/</text>
<text x="204" y="114">A</text>
<text x="214" y="114">t</text>
<text x="224" y="114">o</text>
<text x="234" y="114">m</text>
<text x="244" y="114">i</text>
<text x="254" y="114">c</text>
<text x="264" y="114">B</text>
<text x="274" y="114">o</text>
<text x="284" y="114">o</text>
<text x="294" y="114">l</text>
<text x="664" y="114">│</text>
<text x="114" y="134">│</text>
<text x="664" y="134">│</text>
<text x="34" y="154">│</text>
<text x="74" y="154">初</text>
<text x="94" y="154">始</text>
<text x="114" y="154">值</text>
<text x="144" y="154">=</text>
<text x="164" y="154">0</text>
<text x="174" y="154">（</text>
<text x="194" y="154">f</text>
<text x="204" y="154">r</text>
<text x="214" y="154">e</text>
<text x="224" y="154">e</text>
<text x="234" y="154">）</text>
<text x="664" y="154">│</text>
<text x="34" y="174">└</text>
<text x="44" y="174">─</text>
<text x="54" y="174">─</text>
<text x="64" y="174">─</text>
<text x="74" y="174">─</text>
<text x="84" y="174">─</text>
<text x="94" y="174">─</text>
<text x="104" y="174">─</text>
<text x="114" y="174">─</text>
<text x="124" y="174">─</text>
<text x="134" y="174">─</text>
<text x="144" y="174">─</text>
<text x="154" y="174">─</text>
<text x="164" y="174">─</text>
<text x="174" y="174">─</text>
<text x="184" y="174">─</text>
<text x="194" y="174">─</text>
<text x="204" y="174">─</text>
<text x="214" y="174">─</text>
<text x="224" y="174">─</text>
<text x="234" y="174">─</text>
<text x="244" y="174">─</text>
<text x="254" y="174">─</text>
<text x="264" y="174">─</text>
<text x="274" y="174">─</text>
<text x="284" y="174">─</text>
<text x="294" y="174">─</text>
<text x="304" y="174">─</text>
<text x="314" y="174">─</text>
<text x="324" y="174">─</text>
<text x="334" y="174">─</text>
<text x="344" y="174">─</text>
<text x="354" y="174">─</text>
<text x="364" y="174">─</text>
<text x="374" y="174">─</text>
<text x="384" y="174">─</text>
<text x="394" y="174">─</text>
<text x="404" y="174">─</text>
<text x="414" y="174">─</text>
<text x="424" y="174">─</text>
<text x="434" y="174">─</text>
<text x="444" y="174">─</text>
<text x="454" y="174">─</text>
<text x="464" y="174">─</text>
<text x="474" y="174">─</text>
<text x="484" y="174">─</text>
<text x="494" y="174">─</text>
<text x="504" y="174">─</text>
<text x="514" y="174">─</text>
<text x="524" y="174">─</text>
<text x="534" y="174">─</text>
<text x="544" y="174">─</text>
<text x="554" y="174">─</text>
<text x="564" y="174">─</text>
<text x="574" y="174">─</text>
<text x="584" y="174">─</text>
<text x="594" y="174">─</text>
<text x="604" y="174">─</text>
<text x="614" y="174">─</text>
<text x="624" y="174">─</text>
<text x="634" y="174">─</text>
<text x="644" y="174">─</text>
<text x="654" y="174">─</text>
<text x="664" y="174">┘</text>
<text x="34" y="214">l</text>
<text x="44" y="214">o</text>
<text x="54" y="214">c</text>
<text x="64" y="214">k</text>
<text x="74" y="214">(</text>
<text x="84" y="214">)</text>
<text x="104" y="214">流</text>
<text x="124" y="214">程</text>
<text x="144" y="214">：</text>
<text x="34" y="234">┌</text>
<text x="44" y="234">─</text>
<text x="54" y="234">─</text>
<text x="64" y="234">─</text>
<text x="74" y="234">─</text>
<text x="84" y="234">─</text>
<text x="94" y="234">─</text>
<text x="104" y="234">─</text>
<text x="114" y="234">─</text>
<text x="124" y="234">─</text>
<text x="134" y="234">─</text>
<text x="144" y="234">─</text>
<text x="154" y="234">─</text>
<text x="164" y="234">─</text>
<text x="174" y="234">─</text>
<text x="184" y="234">─</text>
<text x="194" y="234">─</text>
<text x="204" y="234">─</text>
<text x="214" y="234">─</text>
<text x="224" y="234">─</text>
<text x="234" y="234">─</text>
<text x="244" y="234">─</text>
<text x="254" y="234">─</text>
<text x="264" y="234">─</text>
<text x="274" y="234">─</text>
<text x="284" y="234">─</text>
<text x="294" y="234">─</text>
<text x="304" y="234">─</text>
<text x="314" y="234">─</text>
<text x="324" y="234">─</text>
<text x="334" y="234">─</text>
<text x="344" y="234">─</text>
<text x="354" y="234">─</text>
<text x="364" y="234">─</text>
<text x="374" y="234">─</text>
<text x="384" y="234">─</text>
<text x="394" y="234">─</text>
<text x="404" y="234">─</text>
<text x="414" y="234">─</text>
<text x="424" y="234">─</text>
<text x="434" y="234">─</text>
<text x="444" y="234">─</text>
<text x="454" y="234">─</text>
<text x="464" y="234">─</text>
<text x="474" y="234">─</text>
<text x="484" y="234">─</text>
<text x="494" y="234">─</text>
<text x="504" y="234">─</text>
<text x="514" y="234">─</text>
<text x="524" y="234">─</text>
<text x="534" y="234">─</text>
<text x="544" y="234">─</text>
<text x="554" y="234">─</text>
<text x="564" y="234">─</text>
<text x="574" y="234">─</text>
<text x="584" y="234">─</text>
<text x="594" y="234">─</text>
<text x="604" y="234">─</text>
<text x="614" y="234">─</text>
<text x="624" y="234">─</text>
<text x="634" y="234">─</text>
<text x="644" y="234">─</text>
<text x="654" y="234">─</text>
<text x="664" y="234">┐</text>
<text x="44" y="254">│</text>
<text x="664" y="254">│</text>
<text x="34" y="274">│</text>
<text x="64" y="274">┌</text>
<text x="74" y="274">─</text>
<text x="84" y="274">─</text>
<text x="94" y="274">─</text>
<text x="104" y="274">─</text>
<text x="114" y="274">─</text>
<text x="124" y="274">─</text>
<text x="134" y="274">─</text>
<text x="144" y="274">─</text>
<text x="154" y="274">─</text>
<text x="164" y="274">─</text>
<text x="174" y="274">┐</text>
<text x="224" y="274">C</text>
<text x="234" y="274">A</text>
<text x="244" y="274">S</text>
<text x="254" y="274">(</text>
<text x="264" y="274">0</text>
<text x="274" y="274">→</text>
<text x="284" y="274">1</text>
<text x="294" y="274">)</text>
<text x="354" y="274">┌</text>
<text x="364" y="274">─</text>
<text x="374" y="274">─</text>
<text x="384" y="274">─</text>
<text x="394" y="274">─</text>
<text x="404" y="274">─</text>
<text x="414" y="274">─</text>
<text x="424" y="274">─</text>
<text x="434" y="274">─</text>
<text x="444" y="274">─</text>
<text x="454" y="274">─</text>
<text x="464" y="274">─</text>
<text x="474" y="274">─</text>
<text x="484" y="274">┐</text>
<text x="664" y="274">│</text>
<text x="34" y="294">│</text>
<text x="64" y="294">│</text>
<text x="94" y="294">T</text>
<text x="104" y="294">h</text>
<text x="114" y="294">r</text>
<text x="124" y="294">e</text>
<text x="134" y="294">a</text>
<text x="144" y="294">d</text>
<text x="174" y="294">│</text>
<text x="194" y="294">─</text>
<text x="204" y="294">─</text>
<text x="214" y="294">─</text>
<text x="234" y="294">成</text>
<text x="254" y="294">功</text>
<text x="284" y="294">─</text>
<text x="294" y="294">─</text>
<text x="304" y="294">─</text>
<text x="314" y="294">─</text>
<text x="324" y="294">─</text>
<text x="334" y="294">─</text>
<text x="344" y="294">►</text>
<text x="364" y="294">│</text>
<text x="394" y="294">進</text>
<text x="414" y="294">入</text>
<text x="484" y="294">│</text>
<text x="664" y="294">│</text>
<text x="34" y="314">│</text>
<text x="64" y="314">│</text>
<text x="94" y="314">嘗</text>
<text x="114" y="314">試</text>
<text x="134" y="314">鎖</text>
<text x="174" y="314">│</text>
<text x="354" y="314">│</text>
<text x="384" y="314">臨</text>
<text x="404" y="314">界</text>
<text x="424" y="314">區</text>
<text x="484" y="314">│</text>
<text x="664" y="314">│</text>
<text x="34" y="334">│</text>
<text x="64" y="334">└</text>
<text x="74" y="334">─</text>
<text x="84" y="334">─</text>
<text x="94" y="334">─</text>
<text x="104" y="334">─</text>
<text x="114" y="334">─</text>
<text x="124" y="334">─</text>
<text x="134" y="334">─</text>
<text x="144" y="334">─</text>
<text x="154" y="334">─</text>
<text x="164" y="334">─</text>
<text x="174" y="334">┘</text>
<text x="354" y="334">└</text>
<text x="364" y="334">─</text>
<text x="374" y="334">─</text>
<text x="384" y="334">─</text>
<text x="394" y="334">─</text>
<text x="404" y="334">─</text>
<text x="414" y="334">─</text>
<text x="424" y="334">─</text>
<text x="434" y="334">─</text>
<text x="444" y="334">─</text>
<text x="454" y="334">─</text>
<text x="464" y="334">─</text>
<text x="474" y="334">─</text>
<text x="484" y="334">┘</text>
<text x="664" y="334">│</text>
<text x="44" y="354">│</text>
<text x="124" y="354">│</text>
<text x="664" y="354">│</text>
<text x="34" y="374">│</text>
<text x="114" y="374">│</text>
<text x="134" y="374">C</text>
<text x="144" y="374">A</text>
<text x="154" y="374">S</text>
<text x="164" y="374">(</text>
<text x="174" y="374">0</text>
<text x="184" y="374">→</text>
<text x="194" y="374">1</text>
<text x="204" y="374">)</text>
<text x="224" y="374">失</text>
<text x="244" y="374">敗</text>
<text x="664" y="374">│</text>
<text x="34" y="394">│</text>
<text x="114" y="394">▼</text>
<text x="664" y="394">│</text>
<text x="34" y="414">│</text>
<text x="64" y="414">┌</text>
<text x="74" y="414">─</text>
<text x="84" y="414">─</text>
<text x="94" y="414">─</text>
<text x="104" y="414">─</text>
<text x="114" y="414">─</text>
<text x="124" y="414">─</text>
<text x="134" y="414">─</text>
<text x="144" y="414">─</text>
<text x="154" y="414">─</text>
<text x="164" y="414">─</text>
<text x="174" y="414">─</text>
<text x="184" y="414">─</text>
<text x="194" y="414">─</text>
<text x="204" y="414">─</text>
<text x="214" y="414">─</text>
<text x="224" y="414">─</text>
<text x="234" y="414">─</text>
<text x="244" y="414">─</text>
<text x="254" y="414">─</text>
<text x="264" y="414">─</text>
<text x="274" y="414">─</text>
<text x="284" y="414">─</text>
<text x="294" y="414">─</text>
<text x="304" y="414">─</text>
<text x="314" y="414">─</text>
<text x="324" y="414">─</text>
<text x="334" y="414">─</text>
<text x="344" y="414">─</text>
<text x="354" y="414">─</text>
<text x="364" y="414">─</text>
<text x="374" y="414">─</text>
<text x="384" y="414">─</text>
<text x="394" y="414">─</text>
<text x="404" y="414">─</text>
<text x="414" y="414">─</text>
<text x="424" y="414">─</text>
<text x="434" y="414">─</text>
<text x="444" y="414">─</text>
<text x="454" y="414">─</text>
<text x="464" y="414">─</text>
<text x="474" y="414">┐</text>
<text x="664" y="414">│</text>
<text x="34" y="434">│</text>
<text x="64" y="434">│</text>
<text x="164" y="434">自</text>
<text x="184" y="434">旋</text>
<text x="204" y="434">等</text>
<text x="224" y="434">待</text>
<text x="244" y="434">迴</text>
<text x="264" y="434">圈</text>
<text x="474" y="434">│</text>
<text x="664" y="434">│</text>
<text x="34" y="454">│</text>
<text x="64" y="454">│</text>
<text x="454" y="454">│</text>
<text x="474" y="454">m</text>
<text x="484" y="454">e</text>
<text x="494" y="454">m</text>
<text x="504" y="454">o</text>
<text x="514" y="454">r</text>
<text x="524" y="454">y</text>
<text x="534" y="454">_</text>
<text x="544" y="454">o</text>
<text x="554" y="454">r</text>
<text x="564" y="454">d</text>
<text x="574" y="454">e</text>
<text x="584" y="454">r</text>
<text x="594" y="454">_</text>
<text x="664" y="454">│</text>
<text x="34" y="474">│</text>
<text x="64" y="474">│</text>
<text x="94" y="474">w</text>
<text x="104" y="474">h</text>
<text x="114" y="474">i</text>
<text x="124" y="474">l</text>
<text x="134" y="474">e</text>
<text x="154" y="474">(</text>
<text x="164" y="474">f</text>
<text x="174" y="474">l</text>
<text x="184" y="474">a</text>
<text x="194" y="474">g</text>
<text x="214" y="474">!</text>
<text x="224" y="474">=</text>
<text x="244" y="474">0</text>
<text x="254" y="474">)</text>
<text x="274" y="474">{</text>
<text x="454" y="474">│</text>
<text x="474" y="474">a</text>
<text x="484" y="474">c</text>
<text x="494" y="474">q</text>
<text x="504" y="474">u</text>
<text x="514" y="474">i</text>
<text x="524" y="474">r</text>
<text x="534" y="474">e</text>
<text x="554" y="474">←</text>
<text x="564" y="474">─</text>
<text x="574" y="474">─</text>
<text x="584" y="474">─</text>
<text x="594" y="474">─</text>
<text x="604" y="474">─</text>
<text x="614" y="474">─</text>
<text x="664" y="474">│</text>
<text x="34" y="494">│</text>
<text x="64" y="494">│</text>
<text x="134" y="494">[</text>
<text x="144" y="494">p</text>
<text x="154" y="494">a</text>
<text x="164" y="494">u</text>
<text x="174" y="494">s</text>
<text x="184" y="494">e</text>
<text x="204" y="494">/</text>
<text x="224" y="494">y</text>
<text x="234" y="494">i</text>
<text x="244" y="494">e</text>
<text x="254" y="494">l</text>
<text x="264" y="494">d</text>
<text x="274" y="494">]</text>
<text x="304" y="494">←</text>
<text x="314" y="494">─</text>
<text x="324" y="494">─</text>
<text x="344" y="494">C</text>
<text x="354" y="494">P</text>
<text x="364" y="494">U</text>
<text x="384" y="494">提</text>
<text x="404" y="494">示</text>
<text x="454" y="494">│</text>
<text x="474" y="494">確</text>
<text x="494" y="494">保</text>
<text x="514" y="494">後</text>
<text x="534" y="494">續</text>
<text x="554" y="494">讀</text>
<text x="574" y="494">到</text>
<text x="664" y="494">│</text>
<text x="34" y="514">│</text>
<text x="64" y="514">│</text>
<text x="94" y="514">}</text>
<text x="454" y="514">│</text>
<text x="474" y="514">最</text>
<text x="494" y="514">新</text>
<text x="514" y="514">資</text>
<text x="534" y="514">料</text>
<text x="664" y="514">│</text>
<text x="34" y="534">│</text>
<text x="64" y="534">│</text>
<text x="94" y="534">再</text>
<text x="114" y="534">試</text>
<text x="144" y="534">C</text>
<text x="154" y="534">A</text>
<text x="164" y="534">S</text>
<text x="174" y="534">(</text>
<text x="184" y="534">0</text>
<text x="194" y="534">→</text>
<text x="204" y="534">1</text>
<text x="214" y="534">)</text>
<text x="474" y="534">│</text>
<text x="664" y="534">│</text>
<text x="34" y="554">│</text>
<text x="64" y="554">└</text>
<text x="74" y="554">─</text>
<text x="84" y="554">─</text>
<text x="94" y="554">─</text>
<text x="104" y="554">─</text>
<text x="114" y="554">─</text>
<text x="124" y="554">─</text>
<text x="134" y="554">─</text>
<text x="144" y="554">─</text>
<text x="154" y="554">─</text>
<text x="164" y="554">─</text>
<text x="174" y="554">─</text>
<text x="184" y="554">─</text>
<text x="194" y="554">─</text>
<text x="204" y="554">─</text>
<text x="214" y="554">─</text>
<text x="224" y="554">─</text>
<text x="234" y="554">─</text>
<text x="244" y="554">─</text>
<text x="254" y="554">─</text>
<text x="264" y="554">─</text>
<text x="274" y="554">─</text>
<text x="284" y="554">─</text>
<text x="294" y="554">─</text>
<text x="304" y="554">─</text>
<text x="314" y="554">─</text>
<text x="324" y="554">─</text>
<text x="334" y="554">─</text>
<text x="344" y="554">─</text>
<text x="354" y="554">─</text>
<text x="364" y="554">─</text>
<text x="374" y="554">─</text>
<text x="384" y="554">─</text>
<text x="394" y="554">─</text>
<text x="404" y="554">─</text>
<text x="414" y="554">─</text>
<text x="424" y="554">─</text>
<text x="434" y="554">─</text>
<text x="444" y="554">─</text>
<text x="454" y="554">─</text>
<text x="464" y="554">─</text>
<text x="474" y="554">┘</text>
<text x="664" y="554">│</text>
<text x="44" y="574">│</text>
<text x="664" y="574">│</text>
<text x="34" y="594">└</text>
<text x="44" y="594">─</text>
<text x="54" y="594">─</text>
<text x="64" y="594">─</text>
<text x="74" y="594">─</text>
<text x="84" y="594">─</text>
<text x="94" y="594">─</text>
<text x="104" y="594">─</text>
<text x="114" y="594">─</text>
<text x="124" y="594">─</text>
<text x="134" y="594">─</text>
<text x="144" y="594">─</text>
<text x="154" y="594">─</text>
<text x="164" y="594">─</text>
<text x="174" y="594">─</text>
<text x="184" y="594">─</text>
<text x="194" y="594">─</text>
<text x="204" y="594">─</text>
<text x="214" y="594">─</text>
<text x="224" y="594">─</text>
<text x="234" y="594">─</text>
<text x="244" y="594">─</text>
<text x="254" y="594">─</text>
<text x="264" y="594">─</text>
<text x="274" y="594">─</text>
<text x="284" y="594">─</text>
<text x="294" y="594">─</text>
<text x="304" y="594">─</text>
<text x="314" y="594">─</text>
<text x="324" y="594">─</text>
<text x="334" y="594">─</text>
<text x="344" y="594">─</text>
<text x="354" y="594">─</text>
<text x="364" y="594">─</text>
<text x="374" y="594">─</text>
<text x="384" y="594">─</text>
<text x="394" y="594">─</text>
<text x="404" y="594">─</text>
<text x="414" y="594">─</text>
<text x="424" y="594">─</text>
<text x="434" y="594">─</text>
<text x="444" y="594">─</text>
<text x="454" y="594">─</text>
<text x="464" y="594">─</text>
<text x="474" y="594">─</text>
<text x="484" y="594">─</text>
<text x="494" y="594">─</text>
<text x="504" y="594">─</text>
<text x="514" y="594">─</text>
<text x="524" y="594">─</text>
<text x="534" y="594">─</text>
<text x="544" y="594">─</text>
<text x="554" y="594">─</text>
<text x="564" y="594">─</text>
<text x="574" y="594">─</text>
<text x="584" y="594">─</text>
<text x="594" y="594">─</text>
<text x="604" y="594">─</text>
<text x="614" y="594">─</text>
<text x="624" y="594">─</text>
<text x="634" y="594">─</text>
<text x="644" y="594">─</text>
<text x="654" y="594">─</text>
<text x="664" y="594">┘</text>
<text x="34" y="634">u</text>
<text x="44" y="634">n</text>
<text x="54" y="634">l</text>
<text x="64" y="634">o</text>
<text x="74" y="634">c</text>
<text x="84" y="634">k</text>
<text x="94" y="634">(</text>
<text x="104" y="634">)</text>
<text x="124" y="634">流</text>
<text x="144" y="634">程</text>
<text x="164" y="634">：</text>
<text x="34" y="654">┌</text>
<text x="44" y="654">─</text>
<text x="54" y="654">─</text>
<text x="64" y="654">─</text>
<text x="74" y="654">─</text>
<text x="84" y="654">─</text>
<text x="94" y="654">─</text>
<text x="104" y="654">─</text>
<text x="114" y="654">─</text>
<text x="124" y="654">─</text>
<text x="134" y="654">─</text>
<text x="144" y="654">─</text>
<text x="154" y="654">─</text>
<text x="164" y="654">─</text>
<text x="174" y="654">─</text>
<text x="184" y="654">─</text>
<text x="194" y="654">─</text>
<text x="204" y="654">─</text>
<text x="214" y="654">─</text>
<text x="224" y="654">─</text>
<text x="234" y="654">─</text>
<text x="244" y="654">─</text>
<text x="254" y="654">─</text>
<text x="264" y="654">─</text>
<text x="274" y="654">─</text>
<text x="284" y="654">─</text>
<text x="294" y="654">─</text>
<text x="304" y="654">─</text>
<text x="314" y="654">─</text>
<text x="324" y="654">─</text>
<text x="334" y="654">─</text>
<text x="344" y="654">─</text>
<text x="354" y="654">─</text>
<text x="364" y="654">─</text>
<text x="374" y="654">─</text>
<text x="384" y="654">─</text>
<text x="394" y="654">─</text>
<text x="404" y="654">─</text>
<text x="414" y="654">─</text>
<text x="424" y="654">─</text>
<text x="434" y="654">─</text>
<text x="444" y="654">─</text>
<text x="454" y="654">─</text>
<text x="464" y="654">─</text>
<text x="474" y="654">─</text>
<text x="484" y="654">─</text>
<text x="494" y="654">─</text>
<text x="504" y="654">─</text>
<text x="514" y="654">─</text>
<text x="524" y="654">─</text>
<text x="534" y="654">─</text>
<text x="544" y="654">─</text>
<text x="554" y="654">─</text>
<text x="564" y="654">─</text>
<text x="574" y="654">─</text>
<text x="584" y="654">─</text>
<text x="594" y="654">─</text>
<text x="604" y="654">─</text>
<text x="614" y="654">─</text>
<text x="624" y="654">─</text>
<text x="634" y="654">─</text>
<text x="644" y="654">─</text>
<text x="654" y="654">─</text>
<text x="664" y="654">┐</text>
<text x="44" y="674">│</text>
<text x="664" y="674">│</text>
<text x="34" y="694">│</text>
<text x="64" y="694">┌</text>
<text x="74" y="694">─</text>
<text x="84" y="694">─</text>
<text x="94" y="694">─</text>
<text x="104" y="694">─</text>
<text x="114" y="694">─</text>
<text x="124" y="694">─</text>
<text x="134" y="694">─</text>
<text x="144" y="694">─</text>
<text x="154" y="694">─</text>
<text x="164" y="694">─</text>
<text x="174" y="694">┐</text>
<text x="214" y="694">s</text>
<text x="224" y="694">t</text>
<text x="234" y="694">o</text>
<text x="244" y="694">r</text>
<text x="254" y="694">e</text>
<text x="264" y="694">(</text>
<text x="274" y="694">0</text>
<text x="284" y="694">)</text>
<text x="354" y="694">┌</text>
<text x="364" y="694">─</text>
<text x="374" y="694">─</text>
<text x="384" y="694">─</text>
<text x="394" y="694">─</text>
<text x="404" y="694">─</text>
<text x="414" y="694">─</text>
<text x="424" y="694">─</text>
<text x="434" y="694">─</text>
<text x="444" y="694">─</text>
<text x="454" y="694">─</text>
<text x="464" y="694">─</text>
<text x="474" y="694">─</text>
<text x="484" y="694">─</text>
<text x="494" y="694">─</text>
<text x="504" y="694">─</text>
<text x="514" y="694">─</text>
<text x="524" y="694">─</text>
<text x="534" y="694">─</text>
<text x="544" y="694">─</text>
<text x="554" y="694">─</text>
<text x="564" y="694">─</text>
<text x="574" y="694">─</text>
<text x="584" y="694">─</text>
<text x="594" y="694">─</text>
<text x="604" y="694">┐</text>
<text x="664" y="694">│</text>
<text x="34" y="714">│</text>
<text x="64" y="714">│</text>
<text x="94" y="714">T</text>
<text x="104" y="714">h</text>
<text x="114" y="714">r</text>
<text x="124" y="714">e</text>
<text x="134" y="714">a</text>
<text x="144" y="714">d</text>
<text x="174" y="714">│</text>
<text x="194" y="714">─</text>
<text x="204" y="714">─</text>
<text x="214" y="714">─</text>
<text x="224" y="714">─</text>
<text x="234" y="714">─</text>
<text x="244" y="714">─</text>
<text x="254" y="714">─</text>
<text x="264" y="714">─</text>
<text x="274" y="714">─</text>
<text x="284" y="714">─</text>
<text x="294" y="714">─</text>
<text x="304" y="714">─</text>
<text x="314" y="714">─</text>
<text x="324" y="714">─</text>
<text x="334" y="714">►</text>
<text x="354" y="714">│</text>
<text x="384" y="714">f</text>
<text x="394" y="714">l</text>
<text x="404" y="714">a</text>
<text x="414" y="714">g</text>
<text x="434" y="714">=</text>
<text x="454" y="714">0</text>
<text x="464" y="714">（</text>
<text x="484" y="714">f</text>
<text x="494" y="714">r</text>
<text x="504" y="714">e</text>
<text x="514" y="714">e</text>
<text x="524" y="714">）</text>
<text x="604" y="714">│</text>
<text x="664" y="714">│</text>
<text x="34" y="734">│</text>
<text x="64" y="734">│</text>
<text x="94" y="734">持</text>
<text x="114" y="734">有</text>
<text x="134" y="734">者</text>
<text x="174" y="734">│</text>
<text x="204" y="734">m</text>
<text x="214" y="734">e</text>
<text x="224" y="734">m</text>
<text x="234" y="734">o</text>
<text x="244" y="734">r</text>
<text x="254" y="734">y</text>
<text x="264" y="734">_</text>
<text x="274" y="734">o</text>
<text x="284" y="734">r</text>
<text x="294" y="734">d</text>
<text x="304" y="734">e</text>
<text x="314" y="734">r</text>
<text x="324" y="734">_</text>
<text x="354" y="734">│</text>
<text x="384" y="734">其</text>
<text x="404" y="734">他</text>
<text x="424" y="734">執</text>
<text x="444" y="734">行</text>
<text x="464" y="734">緒</text>
<text x="484" y="734">可</text>
<text x="504" y="734">競</text>
<text x="524" y="734">爭</text>
<text x="604" y="734">│</text>
<text x="664" y="734">│</text>
<text x="34" y="754">│</text>
<text x="64" y="754">└</text>
<text x="74" y="754">─</text>
<text x="84" y="754">─</text>
<text x="94" y="754">─</text>
<text x="104" y="754">─</text>
<text x="114" y="754">─</text>
<text x="124" y="754">─</text>
<text x="134" y="754">─</text>
<text x="144" y="754">─</text>
<text x="154" y="754">─</text>
<text x="164" y="754">─</text>
<text x="174" y="754">┘</text>
<text x="204" y="754">r</text>
<text x="214" y="754">e</text>
<text x="224" y="754">l</text>
<text x="234" y="754">e</text>
<text x="244" y="754">a</text>
<text x="254" y="754">s</text>
<text x="264" y="754">e</text>
<text x="284" y="754">─</text>
<text x="294" y="754">─</text>
<text x="304" y="754">─</text>
<text x="314" y="754">─</text>
<text x="324" y="754">►</text>
<text x="354" y="754">└</text>
<text x="364" y="754">─</text>
<text x="374" y="754">─</text>
<text x="384" y="754">─</text>
<text x="394" y="754">─</text>
<text x="404" y="754">─</text>
<text x="414" y="754">─</text>
<text x="424" y="754">─</text>
<text x="434" y="754">─</text>
<text x="444" y="754">─</text>
<text x="454" y="754">─</text>
<text x="464" y="754">─</text>
<text x="474" y="754">─</text>
<text x="484" y="754">─</text>
<text x="494" y="754">─</text>
<text x="504" y="754">─</text>
<text x="514" y="754">─</text>
<text x="524" y="754">─</text>
<text x="534" y="754">─</text>
<text x="544" y="754">─</text>
<text x="554" y="754">─</text>
<text x="564" y="754">─</text>
<text x="574" y="754">─</text>
<text x="584" y="754">─</text>
<text x="594" y="754">─</text>
<text x="604" y="754">┘</text>
<text x="664" y="754">│</text>
<text x="34" y="774">│</text>
<text x="214" y="774">確</text>
<text x="234" y="774">保</text>
<text x="254" y="774">前</text>
<text x="274" y="774">面</text>
<text x="294" y="774">寫</text>
<text x="314" y="774">入</text>
<text x="664" y="774">│</text>
<text x="34" y="794">│</text>
<text x="214" y="794">對</text>
<text x="234" y="794">其</text>
<text x="254" y="794">他</text>
<text x="274" y="794">執</text>
<text x="294" y="794">行</text>
<text x="314" y="794">緒</text>
<text x="334" y="794">可</text>
<text x="354" y="794">見</text>
<text x="664" y="794">│</text>
<text x="34" y="814">└</text>
<text x="44" y="814">─</text>
<text x="54" y="814">─</text>
<text x="64" y="814">─</text>
<text x="74" y="814">─</text>
<text x="84" y="814">─</text>
<text x="94" y="814">─</text>
<text x="104" y="814">─</text>
<text x="114" y="814">─</text>
<text x="124" y="814">─</text>
<text x="134" y="814">─</text>
<text x="144" y="814">─</text>
<text x="154" y="814">─</text>
<text x="164" y="814">─</text>
<text x="174" y="814">─</text>
<text x="184" y="814">─</text>
<text x="194" y="814">─</text>
<text x="204" y="814">─</text>
<text x="214" y="814">─</text>
<text x="224" y="814">─</text>
<text x="234" y="814">─</text>
<text x="244" y="814">─</text>
<text x="254" y="814">─</text>
<text x="264" y="814">─</text>
<text x="274" y="814">─</text>
<text x="284" y="814">─</text>
<text x="294" y="814">─</text>
<text x="304" y="814">─</text>
<text x="314" y="814">─</text>
<text x="324" y="814">─</text>
<text x="334" y="814">─</text>
<text x="344" y="814">─</text>
<text x="354" y="814">─</text>
<text x="364" y="814">─</text>
<text x="374" y="814">─</text>
<text x="384" y="814">─</text>
<text x="394" y="814">─</text>
<text x="404" y="814">─</text>
<text x="414" y="814">─</text>
<text x="424" y="814">─</text>
<text x="434" y="814">─</text>
<text x="444" y="814">─</text>
<text x="454" y="814">─</text>
<text x="464" y="814">─</text>
<text x="474" y="814">─</text>
<text x="484" y="814">─</text>
<text x="494" y="814">─</text>
<text x="504" y="814">─</text>
<text x="514" y="814">─</text>
<text x="524" y="814">─</text>
<text x="534" y="814">─</text>
<text x="544" y="814">─</text>
<text x="554" y="814">─</text>
<text x="564" y="814">─</text>
<text x="574" y="814">─</text>
<text x="584" y="814">─</text>
<text x="594" y="814">─</text>
<text x="604" y="814">─</text>
<text x="614" y="814">─</text>
<text x="624" y="814">─</text>
<text x="634" y="814">─</text>
<text x="644" y="814">─</text>
<text x="654" y="814">─</text>
<text x="664" y="814">┘</text>
<text x="34" y="854">m</text>
<text x="44" y="854">e</text>
<text x="54" y="854">m</text>
<text x="64" y="854">o</text>
<text x="74" y="854">r</text>
<text x="84" y="854">y</text>
<text x="94" y="854">_</text>
<text x="104" y="854">o</text>
<text x="114" y="854">r</text>
<text x="124" y="854">d</text>
<text x="134" y="854">e</text>
<text x="144" y="854">r</text>
<text x="164" y="854">位</text>
<text x="184" y="854">置</text>
<text x="204" y="854">：</text>
<text x="34" y="874">┌</text>
<text x="44" y="874">─</text>
<text x="54" y="874">─</text>
<text x="64" y="874">─</text>
<text x="74" y="874">─</text>
<text x="84" y="874">─</text>
<text x="94" y="874">─</text>
<text x="104" y="874">─</text>
<text x="114" y="874">─</text>
<text x="124" y="874">─</text>
<text x="134" y="874">─</text>
<text x="144" y="874">─</text>
<text x="154" y="874">─</text>
<text x="164" y="874">─</text>
<text x="174" y="874">─</text>
<text x="184" y="874">─</text>
<text x="194" y="874">─</text>
<text x="204" y="874">┬</text>
<text x="214" y="874">─</text>
<text x="224" y="874">─</text>
<text x="234" y="874">─</text>
<text x="244" y="874">─</text>
<text x="254" y="874">─</text>
<text x="264" y="874">─</text>
<text x="274" y="874">─</text>
<text x="284" y="874">─</text>
<text x="294" y="874">─</text>
<text x="304" y="874">─</text>
<text x="314" y="874">─</text>
<text x="324" y="874">─</text>
<text x="334" y="874">─</text>
<text x="344" y="874">─</text>
<text x="354" y="874">─</text>
<text x="364" y="874">─</text>
<text x="374" y="874">─</text>
<text x="384" y="874">─</text>
<text x="394" y="874">─</text>
<text x="404" y="874">─</text>
<text x="414" y="874">─</text>
<text x="424" y="874">─</text>
<text x="434" y="874">─</text>
<text x="444" y="874">─</text>
<text x="454" y="874">─</text>
<text x="464" y="874">─</text>
<text x="474" y="874">─</text>
<text x="484" y="874">─</text>
<text x="494" y="874">─</text>
<text x="504" y="874">─</text>
<text x="514" y="874">─</text>
<text x="524" y="874">─</text>
<text x="534" y="874">─</text>
<text x="544" y="874">─</text>
<text x="554" y="874">─</text>
<text x="564" y="874">─</text>
<text x="574" y="874">─</text>
<text x="584" y="874">─</text>
<text x="594" y="874">─</text>
<text x="604" y="874">─</text>
<text x="614" y="874">─</text>
<text x="624" y="874">─</text>
<text x="634" y="874">─</text>
<text x="644" y="874">─</text>
<text x="654" y="874">─</text>
<text x="664" y="874">┐</text>
<text x="34" y="894">│</text>
<text x="64" y="894">l</text>
<text x="74" y="894">o</text>
<text x="84" y="894">c</text>
<text x="94" y="894">k</text>
<text x="104" y="894">(</text>
<text x="114" y="894">)</text>
<text x="204" y="894">│</text>
<text x="234" y="894">a</text>
<text x="244" y="894">c</text>
<text x="254" y="894">q</text>
<text x="264" y="894">u</text>
<text x="274" y="894">i</text>
<text x="284" y="894">r</text>
<text x="294" y="894">e</text>
<text x="324" y="894">→</text>
<text x="344" y="894">防</text>
<text x="364" y="894">止</text>
<text x="384" y="894">後</text>
<text x="404" y="894">方</text>
<text x="424" y="894">讀</text>
<text x="444" y="894">寫</text>
<text x="464" y="894">被</text>
<text x="484" y="894">提</text>
<text x="504" y="894">前</text>
<text x="524" y="894">到</text>
<text x="554" y="894">l</text>
<text x="564" y="894">o</text>
<text x="574" y="894">c</text>
<text x="584" y="894">k</text>
<text x="604" y="894">前</text>
<text x="664" y="894">│</text>
<text x="34" y="914">│</text>
<text x="64" y="914">u</text>
<text x="74" y="914">n</text>
<text x="84" y="914">l</text>
<text x="94" y="914">o</text>
<text x="104" y="914">c</text>
<text x="114" y="914">k</text>
<text x="124" y="914">(</text>
<text x="134" y="914">)</text>
<text x="204" y="914">│</text>
<text x="234" y="914">r</text>
<text x="244" y="914">e</text>
<text x="254" y="914">l</text>
<text x="264" y="914">e</text>
<text x="274" y="914">a</text>
<text x="284" y="914">s</text>
<text x="294" y="914">e</text>
<text x="324" y="914">→</text>
<text x="344" y="914">防</text>
<text x="364" y="914">止</text>
<text x="384" y="914">前</text>
<text x="404" y="914">方</text>
<text x="424" y="914">寫</text>
<text x="444" y="914">入</text>
<text x="464" y="914">被</text>
<text x="484" y="914">延</text>
<text x="504" y="914">遲</text>
<text x="524" y="914">到</text>
<text x="554" y="914">u</text>
<text x="564" y="914">n</text>
<text x="574" y="914">l</text>
<text x="584" y="914">o</text>
<text x="594" y="914">c</text>
<text x="604" y="914">k</text>
<text x="624" y="914">後</text>
<text x="664" y="914">│</text>
<text x="34" y="934">└</text>
<text x="44" y="934">─</text>
<text x="54" y="934">─</text>
<text x="64" y="934">─</text>
<text x="74" y="934">─</text>
<text x="84" y="934">─</text>
<text x="94" y="934">─</text>
<text x="104" y="934">─</text>
<text x="114" y="934">─</text>
<text x="124" y="934">─</text>
<text x="134" y="934">─</text>
<text x="144" y="934">─</text>
<text x="154" y="934">─</text>
<text x="164" y="934">─</text>
<text x="174" y="934">─</text>
<text x="184" y="934">─</text>
<text x="194" y="934">─</text>
<text x="204" y="934">┴</text>
<text x="214" y="934">─</text>
<text x="224" y="934">─</text>
<text x="234" y="934">─</text>
<text x="244" y="934">─</text>
<text x="254" y="934">─</text>
<text x="264" y="934">─</text>
<text x="274" y="934">─</text>
<text x="284" y="934">─</text>
<text x="294" y="934">─</text>
<text x="304" y="934">─</text>
<text x="314" y="934">─</text>
<text x="324" y="934">─</text>
<text x="334" y="934">─</text>
<text x="344" y="934">─</text>
<text x="354" y="934">─</text>
<text x="364" y="934">─</text>
<text x="374" y="934">─</text>
<text x="384" y="934">─</text>
<text x="394" y="934">─</text>
<text x="404" y="934">─</text>
<text x="414" y="934">─</text>
<text x="424" y="934">─</text>
<text x="434" y="934">─</text>
<text x="444" y="934">─</text>
<text x="454" y="934">─</text>
<text x="464" y="934">─</text>
<text x="474" y="934">─</text>
<text x="484" y="934">─</text>
<text x="494" y="934">─</text>
<text x="504" y="934">─</text>
<text x="514" y="934">─</text>
<text x="524" y="934">─</text>
<text x="534" y="934">─</text>
<text x="544" y="934">─</text>
<text x="554" y="934">─</text>
<text x="564" y="934">─</text>
<text x="574" y="934">─</text>
<text x="584" y="934">─</text>
<text x="594" y="934">─</text>
<text x="604" y="934">─</text>
<text x="614" y="934">─</text>
<text x="624" y="934">─</text>
<text x="634" y="934">─</text>
<text x="644" y="934">─</text>
<text x="654" y="934">─</text>
<text x="664" y="934">┘</text>
</g>
</svg>
</div>
<p>用 <code>atomic_flag</code> 或 CAS 標記鎖是否被占用。</p>
<h2 id="163-自旋成本"><a class="header" href="#163-自旋成本">16.3 自旋成本</a></h2>
<!-- subsection-diagram -->
<h3 id="本小節示意圖-2"><a class="header" href="#本小節示意圖-2">本小節示意圖</a></h3>
<div class="ascii-svg-wrap">
<svg class="ascii-svg" xmlns="http://www.w3.org/2000/svg" width="688" height="824" viewBox="0 0 688 824" role="img" aria-label="ASCII diagram">
<g fill="currentColor" font-family="Noto Sans Mono CJK TC, Noto Sans Mono CJK SC, Noto Sans Mono CJK JP, Sarasa Mono TC, Cascadia Mono, JetBrains Mono, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, monospace" font-size="16" text-rendering="geometricPrecision" xml:space="preserve">
<text x="14" y="14">低</text>
<text x="34" y="14">衝</text>
<text x="54" y="14">突</text>
<text x="84" y="14">v</text>
<text x="94" y="14">s</text>
<text x="114" y="14">高</text>
<text x="134" y="14">衝</text>
<text x="154" y="14">突</text>
<text x="174" y="14">時</text>
<text x="194" y="14">間</text>
<text x="214" y="14">軸</text>
<text x="34" y="54">─</text>
<text x="44" y="54">─</text>
<text x="54" y="54">─</text>
<text x="74" y="54">低</text>
<text x="94" y="54">衝</text>
<text x="114" y="54">突</text>
<text x="134" y="54">場</text>
<text x="154" y="54">景</text>
<text x="174" y="54">（</text>
<text x="194" y="54">臨</text>
<text x="214" y="54">界</text>
<text x="234" y="54">區</text>
<text x="254" y="54">極</text>
<text x="274" y="54">短</text>
<text x="294" y="54">）</text>
<text x="314" y="54">─</text>
<text x="324" y="54">─</text>
<text x="334" y="54">─</text>
<text x="344" y="54">─</text>
<text x="354" y="54">─</text>
<text x="364" y="54">─</text>
<text x="374" y="54">─</text>
<text x="384" y="54">─</text>
<text x="394" y="54">─</text>
<text x="404" y="54">─</text>
<text x="414" y="54">─</text>
<text x="424" y="54">─</text>
<text x="434" y="54">─</text>
<text x="444" y="54">─</text>
<text x="454" y="54">─</text>
<text x="464" y="54">─</text>
<text x="474" y="54">─</text>
<text x="484" y="54">─</text>
<text x="494" y="54">─</text>
<text x="504" y="54">─</text>
<text x="514" y="54">─</text>
<text x="524" y="54">─</text>
<text x="534" y="54">─</text>
<text x="544" y="54">─</text>
<text x="554" y="54">─</text>
<text x="564" y="54">─</text>
<text x="574" y="54">─</text>
<text x="584" y="54">─</text>
<text x="594" y="54">─</text>
<text x="604" y="54">─</text>
<text x="614" y="54">─</text>
<text x="624" y="54">─</text>
<text x="634" y="54">─</text>
<text x="644" y="54">─</text>
<text x="654" y="54">─</text>
<text x="34" y="94">時</text>
<text x="54" y="94">間</text>
<text x="84" y="94">─</text>
<text x="94" y="94">─</text>
<text x="104" y="94">─</text>
<text x="114" y="94">─</text>
<text x="124" y="94">─</text>
<text x="134" y="94">─</text>
<text x="144" y="94">─</text>
<text x="154" y="94">─</text>
<text x="164" y="94">─</text>
<text x="174" y="94">─</text>
<text x="184" y="94">─</text>
<text x="194" y="94">─</text>
<text x="204" y="94">─</text>
<text x="214" y="94">─</text>
<text x="224" y="94">─</text>
<text x="234" y="94">─</text>
<text x="244" y="94">─</text>
<text x="254" y="94">─</text>
<text x="264" y="94">─</text>
<text x="274" y="94">─</text>
<text x="284" y="94">─</text>
<text x="294" y="94">─</text>
<text x="304" y="94">─</text>
<text x="314" y="94">─</text>
<text x="324" y="94">─</text>
<text x="334" y="94">─</text>
<text x="344" y="94">─</text>
<text x="354" y="94">─</text>
<text x="364" y="94">─</text>
<text x="374" y="94">─</text>
<text x="384" y="94">─</text>
<text x="394" y="94">─</text>
<text x="404" y="94">─</text>
<text x="414" y="94">─</text>
<text x="424" y="94">─</text>
<text x="434" y="94">─</text>
<text x="444" y="94">─</text>
<text x="454" y="94">─</text>
<text x="464" y="94">─</text>
<text x="474" y="94">─</text>
<text x="484" y="94">─</text>
<text x="494" y="94">─</text>
<text x="504" y="94">─</text>
<text x="514" y="94">─</text>
<text x="524" y="94">─</text>
<text x="534" y="94">─</text>
<text x="544" y="94">─</text>
<text x="554" y="94">─</text>
<text x="564" y="94">─</text>
<text x="574" y="94">─</text>
<text x="584" y="94">─</text>
<text x="594" y="94">─</text>
<text x="604" y="94">─</text>
<text x="614" y="94">─</text>
<text x="624" y="94">─</text>
<text x="634" y="94">─</text>
<text x="644" y="94">─</text>
<text x="654" y="94">─</text>
<text x="664" y="94">►</text>
<text x="94" y="114">T</text>
<text x="104" y="114">+</text>
<text x="114" y="114">0</text>
<text x="184" y="114">T</text>
<text x="194" y="114">+</text>
<text x="204" y="114">1</text>
<text x="214" y="114">u</text>
<text x="224" y="114">s</text>
<text x="274" y="114">T</text>
<text x="284" y="114">+</text>
<text x="294" y="114">2</text>
<text x="304" y="114">u</text>
<text x="314" y="114">s</text>
<text x="364" y="114">T</text>
<text x="374" y="114">+</text>
<text x="384" y="114">3</text>
<text x="394" y="114">u</text>
<text x="404" y="114">s</text>
<text x="454" y="114">T</text>
<text x="464" y="114">+</text>
<text x="474" y="114">4</text>
<text x="484" y="114">u</text>
<text x="494" y="114">s</text>
<text x="34" y="154">T</text>
<text x="44" y="154">1</text>
<text x="84" y="154">[</text>
<text x="94" y="154">鎖</text>
<text x="114" y="154">]</text>
<text x="124" y="154">[</text>
<text x="134" y="154">工</text>
<text x="154" y="154">作</text>
<text x="174" y="154">]</text>
<text x="184" y="154">[</text>
<text x="194" y="154">解</text>
<text x="214" y="154">鎖</text>
<text x="234" y="154">]</text>
<text x="34" y="174">T</text>
<text x="44" y="174">2</text>
<text x="244" y="174">[</text>
<text x="254" y="174">鎖</text>
<text x="274" y="174">]</text>
<text x="284" y="174">[</text>
<text x="294" y="174">工</text>
<text x="314" y="174">作</text>
<text x="334" y="174">]</text>
<text x="344" y="174">[</text>
<text x="354" y="174">解</text>
<text x="374" y="174">鎖</text>
<text x="394" y="174">]</text>
<text x="34" y="194">T</text>
<text x="44" y="194">3</text>
<text x="414" y="194">[</text>
<text x="424" y="194">鎖</text>
<text x="444" y="194">]</text>
<text x="454" y="194">[</text>
<text x="464" y="194">工</text>
<text x="484" y="194">作</text>
<text x="504" y="194">]</text>
<text x="514" y="194">[</text>
<text x="524" y="194">解</text>
<text x="544" y="194">鎖</text>
<text x="564" y="194">]</text>
<text x="34" y="214">T</text>
<text x="44" y="214">4</text>
<text x="514" y="214">[</text>
<text x="524" y="214">鎖</text>
<text x="544" y="214">]</text>
<text x="554" y="214">[</text>
<text x="564" y="214">工</text>
<text x="584" y="214">作</text>
<text x="604" y="214">]</text>
<text x="614" y="214">.</text>
<text x="624" y="214">.</text>
<text x="634" y="214">.</text>
<text x="34" y="254">C</text>
<text x="44" y="254">P</text>
<text x="54" y="254">U</text>
<text x="84" y="254">█</text>
<text x="94" y="254">█</text>
<text x="104" y="254">█</text>
<text x="114" y="254">█</text>
<text x="124" y="254">░</text>
<text x="134" y="254">░</text>
<text x="144" y="254">░</text>
<text x="154" y="254">░</text>
<text x="164" y="254">░</text>
<text x="174" y="254">█</text>
<text x="184" y="254">█</text>
<text x="194" y="254">█</text>
<text x="204" y="254">█</text>
<text x="214" y="254">░</text>
<text x="224" y="254">░</text>
<text x="234" y="254">░</text>
<text x="244" y="254">░</text>
<text x="254" y="254">░</text>
<text x="264" y="254">█</text>
<text x="274" y="254">█</text>
<text x="284" y="254">█</text>
<text x="294" y="254">█</text>
<text x="304" y="254">░</text>
<text x="314" y="254">░</text>
<text x="324" y="254">░</text>
<text x="334" y="254">░</text>
<text x="344" y="254">░</text>
<text x="354" y="254">█</text>
<text x="364" y="254">█</text>
<text x="374" y="254">█</text>
<text x="384" y="254">█</text>
<text x="84" y="274">有</text>
<text x="104" y="274">效</text>
<text x="154" y="274">空</text>
<text x="174" y="274">閒</text>
<text x="224" y="274">有</text>
<text x="244" y="274">效</text>
<text x="294" y="274">空</text>
<text x="314" y="274">閒</text>
<text x="34" y="294">→</text>
<text x="54" y="294">效</text>
<text x="74" y="294">率</text>
<text x="94" y="294">高</text>
<text x="114" y="294">，</text>
<text x="134" y="294">自</text>
<text x="154" y="294">旋</text>
<text x="174" y="294">時</text>
<text x="194" y="294">間</text>
<text x="214" y="294">幾</text>
<text x="234" y="294">乎</text>
<text x="254" y="294">為</text>
<text x="274" y="294">零</text>
<text x="34" y="334">─</text>
<text x="44" y="334">─</text>
<text x="54" y="334">─</text>
<text x="74" y="334">高</text>
<text x="94" y="334">衝</text>
<text x="114" y="334">突</text>
<text x="134" y="334">場</text>
<text x="154" y="334">景</text>
<text x="174" y="334">（</text>
<text x="194" y="334">多</text>
<text x="214" y="334">核</text>
<text x="234" y="334">競</text>
<text x="254" y="334">爭</text>
<text x="274" y="334">同</text>
<text x="294" y="334">一</text>
<text x="314" y="334">鎖</text>
<text x="334" y="334">）</text>
<text x="354" y="334">─</text>
<text x="364" y="334">─</text>
<text x="374" y="334">─</text>
<text x="384" y="334">─</text>
<text x="394" y="334">─</text>
<text x="404" y="334">─</text>
<text x="414" y="334">─</text>
<text x="424" y="334">─</text>
<text x="434" y="334">─</text>
<text x="444" y="334">─</text>
<text x="454" y="334">─</text>
<text x="464" y="334">─</text>
<text x="474" y="334">─</text>
<text x="484" y="334">─</text>
<text x="494" y="334">─</text>
<text x="504" y="334">─</text>
<text x="514" y="334">─</text>
<text x="524" y="334">─</text>
<text x="534" y="334">─</text>
<text x="544" y="334">─</text>
<text x="554" y="334">─</text>
<text x="564" y="334">─</text>
<text x="574" y="334">─</text>
<text x="584" y="334">─</text>
<text x="594" y="334">─</text>
<text x="604" y="334">─</text>
<text x="614" y="334">─</text>
<text x="624" y="334">─</text>
<text x="634" y="334">─</text>
<text x="644" y="334">─</text>
<text x="34" y="374">時</text>
<text x="54" y="374">間</text>
<text x="84" y="374">─</text>
<text x="94" y="374">─</text>
<text x="104" y="374">─</text>
<text x="114" y="374">─</text>
<text x="124" y="374">─</text>
<text x="134" y="374">─</text>
<text x="144" y="374">─</text>
<text x="154" y="374">─</text>
<text x="164" y="374">─</text>
<text x="174" y="374">─</text>
<text x="184" y="374">─</text>
<text x="194" y="374">─</text>
<text x="204" y="374">─</text>
<text x="214" y="374">─</text>
<text x="224" y="374">─</text>
<text x="234" y="374">─</text>
<text x="244" y="374">─</text>
<text x="254" y="374">─</text>
<text x="264" y="374">─</text>
<text x="274" y="374">─</text>
<text x="284" y="374">─</text>
<text x="294" y="374">─</text>
<text x="304" y="374">─</text>
<text x="314" y="374">─</text>
<text x="324" y="374">─</text>
<text x="334" y="374">─</text>
<text x="344" y="374">─</text>
<text x="354" y="374">─</text>
<text x="364" y="374">─</text>
<text x="374" y="374">─</text>
<text x="384" y="374">─</text>
<text x="394" y="374">─</text>
<text x="404" y="374">─</text>
<text x="414" y="374">─</text>
<text x="424" y="374">─</text>
<text x="434" y="374">─</text>
<text x="444" y="374">─</text>
<text x="454" y="374">─</text>
<text x="464" y="374">─</text>
<text x="474" y="374">─</text>
<text x="484" y="374">─</text>
<text x="494" y="374">─</text>
<text x="504" y="374">─</text>
<text x="514" y="374">─</text>
<text x="524" y="374">─</text>
<text x="534" y="374">─</text>
<text x="544" y="374">─</text>
<text x="554" y="374">─</text>
<text x="564" y="374">─</text>
<text x="574" y="374">─</text>
<text x="584" y="374">─</text>
<text x="594" y="374">─</text>
<text x="604" y="374">─</text>
<text x="614" y="374">─</text>
<text x="624" y="374">─</text>
<text x="634" y="374">─</text>
<text x="644" y="374">─</text>
<text x="654" y="374">─</text>
<text x="664" y="374">►</text>
<text x="94" y="394">T</text>
<text x="104" y="394">+</text>
<text x="114" y="394">0</text>
<text x="184" y="394">T</text>
<text x="194" y="394">+</text>
<text x="204" y="394">1</text>
<text x="214" y="394">0</text>
<text x="224" y="394">u</text>
<text x="234" y="394">s</text>
<text x="274" y="394">T</text>
<text x="284" y="394">+</text>
<text x="294" y="394">2</text>
<text x="304" y="394">0</text>
<text x="314" y="394">u</text>
<text x="324" y="394">s</text>
<text x="364" y="394">T</text>
<text x="374" y="394">+</text>
<text x="384" y="394">3</text>
<text x="394" y="394">0</text>
<text x="404" y="394">u</text>
<text x="414" y="394">s</text>
<text x="454" y="394">T</text>
<text x="464" y="394">+</text>
<text x="474" y="394">4</text>
<text x="484" y="394">0</text>
<text x="494" y="394">u</text>
<text x="504" y="394">s</text>
<text x="34" y="434">T</text>
<text x="44" y="434">1</text>
<text x="84" y="434">[</text>
<text x="94" y="434">鎖</text>
<text x="114" y="434">─</text>
<text x="124" y="434">─</text>
<text x="134" y="434">─</text>
<text x="144" y="434">─</text>
<text x="154" y="434">─</text>
<text x="164" y="434">─</text>
<text x="174" y="434">─</text>
<text x="184" y="434">─</text>
<text x="194" y="434">─</text>
<text x="204" y="434">─</text>
<text x="214" y="434">─</text>
<text x="224" y="434">─</text>
<text x="234" y="434">─</text>
<text x="244" y="434">─</text>
<text x="254" y="434">─</text>
<text x="264" y="434">─</text>
<text x="274" y="434">─</text>
<text x="284" y="434">─</text>
<text x="294" y="434">─</text>
<text x="304" y="434">─</text>
<text x="314" y="434">─</text>
<text x="324" y="434">─</text>
<text x="334" y="434">─</text>
<text x="344" y="434">─</text>
<text x="354" y="434">工</text>
<text x="374" y="434">作</text>
<text x="394" y="434">─</text>
<text x="404" y="434">─</text>
<text x="414" y="434">─</text>
<text x="424" y="434">─</text>
<text x="434" y="434">─</text>
<text x="444" y="434">─</text>
<text x="454" y="434">─</text>
<text x="464" y="434">─</text>
<text x="474" y="434">─</text>
<text x="484" y="434">─</text>
<text x="494" y="434">─</text>
<text x="504" y="434">─</text>
<text x="514" y="434">─</text>
<text x="524" y="434">─</text>
<text x="534" y="434">─</text>
<text x="544" y="434">─</text>
<text x="554" y="434">─</text>
<text x="564" y="434">─</text>
<text x="574" y="434">]</text>
<text x="584" y="434">[</text>
<text x="594" y="434">解</text>
<text x="614" y="434">鎖</text>
<text x="634" y="434">]</text>
<text x="34" y="454">T</text>
<text x="44" y="454">2</text>
<text x="84" y="454">[</text>
<text x="94" y="454">自</text>
<text x="114" y="454">旋</text>
<text x="134" y="454">🔥</text>
<text x="154" y="454">🔥</text>
<text x="174" y="454">🔥</text>
<text x="194" y="454">🔥</text>
<text x="214" y="454">🔥</text>
<text x="234" y="454">🔥</text>
<text x="254" y="454">🔥</text>
<text x="274" y="454">🔥</text>
<text x="294" y="454">🔥</text>
<text x="314" y="454">🔥</text>
<text x="334" y="454">🔥</text>
<text x="354" y="454">🔥</text>
<text x="374" y="454">]</text>
<text x="384" y="454">[</text>
<text x="394" y="454">鎖</text>
<text x="414" y="454">─</text>
<text x="424" y="454">─</text>
<text x="434" y="454">─</text>
<text x="444" y="454">─</text>
<text x="454" y="454">─</text>
<text x="464" y="454">─</text>
<text x="474" y="454">工</text>
<text x="494" y="454">作</text>
<text x="514" y="454">─</text>
<text x="524" y="454">─</text>
<text x="534" y="454">─</text>
<text x="544" y="454">─</text>
<text x="554" y="454">─</text>
<text x="564" y="454">─</text>
<text x="574" y="454">]</text>
<text x="584" y="454">[</text>
<text x="594" y="454">解</text>
<text x="614" y="454">]</text>
<text x="34" y="474">T</text>
<text x="44" y="474">3</text>
<text x="84" y="474">[</text>
<text x="94" y="474">自</text>
<text x="114" y="474">旋</text>
<text x="134" y="474">🔥</text>
<text x="154" y="474">🔥</text>
<text x="174" y="474">🔥</text>
<text x="194" y="474">🔥</text>
<text x="214" y="474">🔥</text>
<text x="234" y="474">🔥</text>
<text x="254" y="474">🔥</text>
<text x="274" y="474">🔥</text>
<text x="294" y="474">🔥</text>
<text x="314" y="474">🔥</text>
<text x="334" y="474">🔥</text>
<text x="354" y="474">🔥</text>
<text x="374" y="474">🔥</text>
<text x="394" y="474">🔥</text>
<text x="414" y="474">🔥</text>
<text x="434" y="474">🔥</text>
<text x="454" y="474">🔥</text>
<text x="474" y="474">🔥</text>
<text x="494" y="474">🔥</text>
<text x="514" y="474">🔥</text>
<text x="534" y="474">]</text>
<text x="544" y="474">[</text>
<text x="554" y="474">鎖</text>
<text x="574" y="474">─</text>
<text x="584" y="474">─</text>
<text x="594" y="474">]</text>
<text x="34" y="494">T</text>
<text x="44" y="494">4</text>
<text x="84" y="494">[</text>
<text x="94" y="494">自</text>
<text x="114" y="494">旋</text>
<text x="134" y="494">🔥</text>
<text x="154" y="494">🔥</text>
<text x="174" y="494">🔥</text>
<text x="194" y="494">🔥</text>
<text x="214" y="494">🔥</text>
<text x="234" y="494">🔥</text>
<text x="254" y="494">🔥</text>
<text x="274" y="494">🔥</text>
<text x="294" y="494">🔥</text>
<text x="314" y="494">🔥</text>
<text x="334" y="494">🔥</text>
<text x="354" y="494">🔥</text>
<text x="374" y="494">🔥</text>
<text x="394" y="494">🔥</text>
<text x="414" y="494">🔥</text>
<text x="434" y="494">🔥</text>
<text x="454" y="494">🔥</text>
<text x="474" y="494">🔥</text>
<text x="494" y="494">🔥</text>
<text x="514" y="494">🔥</text>
<text x="534" y="494">🔥</text>
<text x="554" y="494">🔥</text>
<text x="574" y="494">]</text>
<text x="34" y="534">C</text>
<text x="44" y="534">o</text>
<text x="54" y="534">r</text>
<text x="64" y="534">e</text>
<text x="84" y="534">使</text>
<text x="104" y="534">用</text>
<text x="124" y="534">率</text>
<text x="144" y="534">：</text>
<text x="34" y="554">C</text>
<text x="44" y="554">o</text>
<text x="54" y="554">r</text>
<text x="64" y="554">e</text>
<text x="74" y="554">1</text>
<text x="94" y="554">█</text>
<text x="104" y="554">█</text>
<text x="114" y="554">█</text>
<text x="124" y="554">█</text>
<text x="134" y="554">█</text>
<text x="144" y="554">█</text>
<text x="154" y="554">█</text>
<text x="164" y="554">█</text>
<text x="174" y="554">█</text>
<text x="184" y="554">█</text>
<text x="194" y="554">█</text>
<text x="204" y="554">█</text>
<text x="214" y="554">█</text>
<text x="224" y="554">█</text>
<text x="234" y="554">█</text>
<text x="244" y="554">█</text>
<text x="254" y="554">█</text>
<text x="264" y="554">█</text>
<text x="274" y="554">█</text>
<text x="284" y="554">█</text>
<text x="304" y="554">1</text>
<text x="314" y="554">0</text>
<text x="324" y="554">0</text>
<text x="334" y="554">%</text>
<text x="344" y="554">（</text>
<text x="364" y="554">T</text>
<text x="374" y="554">1</text>
<text x="394" y="554">真</text>
<text x="414" y="554">正</text>
<text x="434" y="554">工</text>
<text x="454" y="554">作</text>
<text x="474" y="554">）</text>
<text x="34" y="574">C</text>
<text x="44" y="574">o</text>
<text x="54" y="574">r</text>
<text x="64" y="574">e</text>
<text x="74" y="574">2</text>
<text x="94" y="574">🔥</text>
<text x="114" y="574">🔥</text>
<text x="134" y="574">🔥</text>
<text x="154" y="574">🔥</text>
<text x="174" y="574">🔥</text>
<text x="194" y="574">🔥</text>
<text x="214" y="574">🔥</text>
<text x="234" y="574">🔥</text>
<text x="254" y="574">🔥</text>
<text x="274" y="574">🔥</text>
<text x="304" y="574">1</text>
<text x="314" y="574">0</text>
<text x="324" y="574">0</text>
<text x="334" y="574">%</text>
<text x="344" y="574">（</text>
<text x="364" y="574">T</text>
<text x="374" y="574">2</text>
<text x="394" y="574">白</text>
<text x="414" y="574">燒</text>
<text x="434" y="574">自</text>
<text x="454" y="574">旋</text>
<text x="474" y="574">）</text>
<text x="34" y="594">C</text>
<text x="44" y="594">o</text>
<text x="54" y="594">r</text>
<text x="64" y="594">e</text>
<text x="74" y="594">3</text>
<text x="94" y="594">🔥</text>
<text x="114" y="594">🔥</text>
<text x="134" y="594">🔥</text>
<text x="154" y="594">🔥</text>
<text x="174" y="594">🔥</text>
<text x="194" y="594">🔥</text>
<text x="214" y="594">🔥</text>
<text x="234" y="594">🔥</text>
<text x="254" y="594">🔥</text>
<text x="274" y="594">🔥</text>
<text x="304" y="594">1</text>
<text x="314" y="594">0</text>
<text x="324" y="594">0</text>
<text x="334" y="594">%</text>
<text x="344" y="594">（</text>
<text x="364" y="594">T</text>
<text x="374" y="594">3</text>
<text x="394" y="594">白</text>
<text x="414" y="594">燒</text>
<text x="434" y="594">自</text>
<text x="454" y="594">旋</text>
<text x="474" y="594">）</text>
<text x="34" y="614">C</text>
<text x="44" y="614">o</text>
<text x="54" y="614">r</text>
<text x="64" y="614">e</text>
<text x="74" y="614">4</text>
<text x="94" y="614">🔥</text>
<text x="114" y="614">🔥</text>
<text x="134" y="614">🔥</text>
<text x="154" y="614">🔥</text>
<text x="174" y="614">🔥</text>
<text x="194" y="614">🔥</text>
<text x="214" y="614">🔥</text>
<text x="234" y="614">🔥</text>
<text x="254" y="614">🔥</text>
<text x="274" y="614">🔥</text>
<text x="304" y="614">1</text>
<text x="314" y="614">0</text>
<text x="324" y="614">0</text>
<text x="334" y="614">%</text>
<text x="344" y="614">（</text>
<text x="364" y="614">T</text>
<text x="374" y="614">4</text>
<text x="394" y="614">白</text>
<text x="414" y="614">燒</text>
<text x="434" y="614">自</text>
<text x="454" y="614">旋</text>
<text x="474" y="614">）</text>
<text x="94" y="634">↑</text>
<text x="94" y="654">C</text>
<text x="104" y="654">P</text>
<text x="114" y="654">U</text>
<text x="134" y="654">使</text>
<text x="154" y="654">用</text>
<text x="174" y="654">率</text>
<text x="204" y="654">1</text>
<text x="214" y="654">0</text>
<text x="224" y="654">0</text>
<text x="234" y="654">%</text>
<text x="254" y="654">但</text>
<text x="284" y="654">7</text>
<text x="294" y="654">5</text>
<text x="304" y="654">%</text>
<text x="324" y="654">是</text>
<text x="344" y="654">無</text>
<text x="364" y="654">效</text>
<text x="384" y="654">功</text>
<text x="404" y="654">！</text>
<text x="34" y="694">┌</text>
<text x="44" y="694">─</text>
<text x="54" y="694">─</text>
<text x="64" y="694">─</text>
<text x="74" y="694">─</text>
<text x="84" y="694">─</text>
<text x="94" y="694">─</text>
<text x="104" y="694">─</text>
<text x="114" y="694">─</text>
<text x="124" y="694">─</text>
<text x="134" y="694">─</text>
<text x="144" y="694">─</text>
<text x="154" y="694">─</text>
<text x="164" y="694">─</text>
<text x="174" y="694">─</text>
<text x="184" y="694">─</text>
<text x="194" y="694">─</text>
<text x="204" y="694">─</text>
<text x="214" y="694">─</text>
<text x="224" y="694">─</text>
<text x="234" y="694">─</text>
<text x="244" y="694">─</text>
<text x="254" y="694">─</text>
<text x="264" y="694">─</text>
<text x="274" y="694">─</text>
<text x="284" y="694">─</text>
<text x="294" y="694">─</text>
<text x="304" y="694">─</text>
<text x="314" y="694">─</text>
<text x="324" y="694">─</text>
<text x="334" y="694">─</text>
<text x="344" y="694">─</text>
<text x="354" y="694">─</text>
<text x="364" y="694">─</text>
<text x="374" y="694">─</text>
<text x="384" y="694">─</text>
<text x="394" y="694">─</text>
<text x="404" y="694">─</text>
<text x="414" y="694">─</text>
<text x="424" y="694">─</text>
<text x="434" y="694">─</text>
<text x="444" y="694">─</text>
<text x="454" y="694">─</text>
<text x="464" y="694">─</text>
<text x="474" y="694">─</text>
<text x="484" y="694">─</text>
<text x="494" y="694">─</text>
<text x="504" y="694">─</text>
<text x="514" y="694">─</text>
<text x="524" y="694">─</text>
<text x="534" y="694">─</text>
<text x="544" y="694">─</text>
<text x="554" y="694">─</text>
<text x="564" y="694">─</text>
<text x="574" y="694">─</text>
<text x="584" y="694">─</text>
<text x="594" y="694">─</text>
<text x="604" y="694">─</text>
<text x="614" y="694">─</text>
<text x="624" y="694">─</text>
<text x="634" y="694">─</text>
<text x="644" y="694">─</text>
<text x="654" y="694">─</text>
<text x="664" y="694">┐</text>
<text x="34" y="714">│</text>
<text x="64" y="714">高</text>
<text x="84" y="714">衝</text>
<text x="104" y="714">突</text>
<text x="124" y="714">下</text>
<text x="154" y="714">S</text>
<text x="164" y="714">p</text>
<text x="174" y="714">i</text>
<text x="184" y="714">n</text>
<text x="204" y="714">L</text>
<text x="214" y="714">o</text>
<text x="224" y="714">c</text>
<text x="234" y="714">k</text>
<text x="254" y="714">的</text>
<text x="274" y="714">問</text>
<text x="294" y="714">題</text>
<text x="314" y="714">：</text>
<text x="664" y="714">│</text>
<text x="34" y="734">│</text>
<text x="64" y="734">・</text>
<text x="84" y="734">多</text>
<text x="104" y="734">個</text>
<text x="134" y="734">C</text>
<text x="144" y="734">o</text>
<text x="154" y="734">r</text>
<text x="164" y="734">e</text>
<text x="184" y="734">同</text>
<text x="204" y="734">時</text>
<text x="224" y="734">在</text>
<text x="244" y="734">旋</text>
<text x="264" y="734">轉</text>
<text x="294" y="734">→</text>
<text x="314" y="734">浪</text>
<text x="334" y="734">費</text>
<text x="354" y="734">電</text>
<text x="374" y="734">力</text>
<text x="394" y="734">與</text>
<text x="424" y="734">C</text>
<text x="434" y="734">P</text>
<text x="444" y="734">U</text>
<text x="464" y="734">時</text>
<text x="484" y="734">間</text>
<text x="664" y="734">│</text>
<text x="34" y="754">│</text>
<text x="64" y="754">・</text>
<text x="84" y="754">C</text>
<text x="94" y="754">a</text>
<text x="104" y="754">c</text>
<text x="114" y="754">h</text>
<text x="124" y="754">e</text>
<text x="144" y="754">c</text>
<text x="154" y="754">o</text>
<text x="164" y="754">h</text>
<text x="174" y="754">e</text>
<text x="184" y="754">r</text>
<text x="194" y="754">e</text>
<text x="204" y="754">n</text>
<text x="214" y="754">c</text>
<text x="224" y="754">e</text>
<text x="244" y="754">流</text>
<text x="264" y="754">量</text>
<text x="284" y="754">激</text>
<text x="304" y="754">增</text>
<text x="334" y="754">→</text>
<text x="354" y="754">總</text>
<text x="374" y="754">線</text>
<text x="394" y="754">飽</text>
<text x="414" y="754">和</text>
<text x="664" y="754">│</text>
<text x="34" y="774">│</text>
<text x="64" y="774">・</text>
<text x="84" y="774">其</text>
<text x="104" y="774">他</text>
<text x="124" y="774">任</text>
<text x="144" y="774">務</text>
<text x="164" y="774">無</text>
<text x="184" y="774">法</text>
<text x="204" y="774">使</text>
<text x="224" y="774">用</text>
<text x="244" y="774">被</text>
<text x="264" y="774">佔</text>
<text x="284" y="774">用</text>
<text x="304" y="774">的</text>
<text x="334" y="774">C</text>
<text x="344" y="774">o</text>
<text x="354" y="774">r</text>
<text x="364" y="774">e</text>
<text x="664" y="774">│</text>
<text x="34" y="794">└</text>
<text x="44" y="794">─</text>
<text x="54" y="794">─</text>
<text x="64" y="794">─</text>
<text x="74" y="794">─</text>
<text x="84" y="794">─</text>
<text x="94" y="794">─</text>
<text x="104" y="794">─</text>
<text x="114" y="794">─</text>
<text x="124" y="794">─</text>
<text x="134" y="794">─</text>
<text x="144" y="794">─</text>
<text x="154" y="794">─</text>
<text x="164" y="794">─</text>
<text x="174" y="794">─</text>
<text x="184" y="794">─</text>
<text x="194" y="794">─</text>
<text x="204" y="794">─</text>
<text x="214" y="794">─</text>
<text x="224" y="794">─</text>
<text x="234" y="794">─</text>
<text x="244" y="794">─</text>
<text x="254" y="794">─</text>
<text x="264" y="794">─</text>
<text x="274" y="794">─</text>
<text x="284" y="794">─</text>
<text x="294" y="794">─</text>
<text x="304" y="794">─</text>
<text x="314" y="794">─</text>
<text x="324" y="794">─</text>
<text x="334" y="794">─</text>
<text x="344" y="794">─</text>
<text x="354" y="794">─</text>
<text x="364" y="794">─</text>
<text x="374" y="794">─</text>
<text x="384" y="794">─</text>
<text x="394" y="794">─</text>
<text x="404" y="794">─</text>
<text x="414" y="794">─</text>
<text x="424" y="794">─</text>
<text x="434" y="794">─</text>
<text x="444" y="794">─</text>
<text x="454" y="794">─</text>
<text x="464" y="794">─</text>
<text x="474" y="794">─</text>
<text x="484" y="794">─</text>
<text x="494" y="794">─</text>
<text x="504" y="794">─</text>
<text x="514" y="794">─</text>
<text x="524" y="794">─</text>
<text x="534" y="794">─</text>
<text x="544" y="794">─</text>
<text x="554" y="794">─</text>
<text x="564" y="794">─</text>
<text x="574" y="794">─</text>
<text x="584" y="794">─</text>
<text x="594" y="794">─</text>
<text x="604" y="794">─</text>
<text x="614" y="794">─</text>
<text x="624" y="794">─</text>
<text x="634" y="794">─</text>
<text x="644" y="794">─</text>
<text x="654" y="794">─</text>
<text x="664" y="794">┘</text>
</g>
</svg>
</div>
<p>低衝突很快；高衝突會燒 CPU。</p>
<h2 id="164-工程補強"><a class="header" href="#164-工程補強">16.4 工程補強</a></h2>
<!-- subsection-diagram -->
<h3 id="本小節示意圖-3"><a class="header" href="#本小節示意圖-3">本小節示意圖</a></h3>
<div class="ascii-svg-wrap">
<svg class="ascii-svg" xmlns="http://www.w3.org/2000/svg" width="608" height="1124" viewBox="0 0 608 1124" role="img" aria-label="ASCII diagram">
<g fill="currentColor" font-family="Noto Sans Mono CJK TC, Noto Sans Mono CJK SC, Noto Sans Mono CJK JP, Sarasa Mono TC, Cascadia Mono, JetBrains Mono, ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, monospace" font-size="16" text-rendering="geometricPrecision" xml:space="preserve">
<text x="14" y="14">自</text>
<text x="34" y="14">旋</text>
<text x="54" y="14">退</text>
<text x="74" y="14">避</text>
<text x="94" y="14">策</text>
<text x="114" y="14">略</text>
<text x="134" y="14">演</text>
<text x="154" y="14">進</text>
<text x="174" y="14">圖</text>
<text x="34" y="54">自</text>
<text x="54" y="54">旋</text>
<text x="74" y="54">失</text>
<text x="94" y="54">敗</text>
<text x="114" y="54">次</text>
<text x="134" y="54">數</text>
<text x="34" y="74">0</text>
<text x="124" y="74">1</text>
<text x="214" y="74">2</text>
<text x="304" y="74">4</text>
<text x="394" y="74">8</text>
<text x="474" y="74">1</text>
<text x="484" y="74">6</text>
<text x="554" y="74">閾</text>
<text x="574" y="74">值</text>
<text x="34" y="94">│</text>
<text x="124" y="94">│</text>
<text x="214" y="94">│</text>
<text x="304" y="94">│</text>
<text x="394" y="94">│</text>
<text x="484" y="94">│</text>
<text x="574" y="94">│</text>
<text x="34" y="114">▼</text>
<text x="124" y="114">▼</text>
<text x="214" y="114">▼</text>
<text x="304" y="114">▼</text>
<text x="394" y="114">▼</text>
<text x="484" y="114">▼</text>
<text x="574" y="114">▼</text>
<text x="34" y="134">┌</text>
<text x="44" y="134">─</text>
<text x="54" y="134">─</text>
<text x="64" y="134">─</text>
<text x="74" y="134">─</text>
<text x="84" y="134">─</text>
<text x="94" y="134">─</text>
<text x="104" y="134">─</text>
<text x="114" y="134">─</text>
<text x="124" y="134">─</text>
<text x="134" y="134">─</text>
<text x="144" y="134">─</text>
<text x="154" y="134">─</text>
<text x="164" y="134">─</text>
<text x="174" y="134">─</text>
<text x="184" y="134">─</text>
<text x="194" y="134">─</text>
<text x="204" y="134">─</text>
<text x="214" y="134">─</text>
<text x="224" y="134">─</text>
<text x="234" y="134">─</text>
<text x="244" y="134">─</text>
<text x="254" y="134">─</text>
<text x="264" y="134">─</text>
<text x="274" y="134">─</text>
<text x="284" y="134">─</text>
<text x="294" y="134">─</text>
<text x="304" y="134">─</text>
<text x="314" y="134">─</text>
<text x="324" y="134">─</text>
<text x="334" y="134">─</text>
<text x="344" y="134">─</text>
<text x="354" y="134">─</text>
<text x="364" y="134">─</text>
<text x="374" y="134">─</text>
<text x="384" y="134">─</text>
<text x="394" y="134">─</text>
<text x="404" y="134">─</text>
<text x="414" y="134">─</text>
<text x="424" y="134">─</text>
<text x="434" y="134">─</text>
<text x="444" y="134">─</text>
<text x="454" y="134">─</text>
<text x="464" y="134">─</text>
<text x="474" y="134">─</text>
<text x="484" y="134">─</text>
<text x="494" y="134">─</text>
<text x="504" y="134">─</text>
<text x="514" y="134">─</text>
<text x="524" y="134">─</text>
<text x="534" y="134">─</text>
<text x="544" y="134">─</text>
<text x="554" y="134">─</text>
<text x="564" y="134">─</text>
<text x="574" y="134">┐</text>
<text x="34" y="154">│</text>
<text x="54" y="154">P</text>
<text x="64" y="154">l</text>
<text x="74" y="154">a</text>
<text x="84" y="154">i</text>
<text x="94" y="154">n</text>
<text x="124" y="154">│</text>
<text x="144" y="154">→</text>
<text x="164" y="154">立</text>
<text x="184" y="154">即</text>
<text x="204" y="154">重</text>
<text x="224" y="154">試</text>
<text x="254" y="154">C</text>
<text x="264" y="154">A</text>
<text x="274" y="154">S</text>
<text x="34" y="174">│</text>
<text x="64" y="174">S</text>
<text x="74" y="174">p</text>
<text x="84" y="174">i</text>
<text x="94" y="174">n</text>
<text x="124" y="174">│</text>
<text x="164" y="174">延</text>
<text x="184" y="174">遲</text>
<text x="214" y="174">=</text>
<text x="234" y="174">0</text>
<text x="34" y="194">└</text>
<text x="44" y="194">─</text>
<text x="54" y="194">─</text>
<text x="64" y="194">─</text>
<text x="74" y="194">─</text>
<text x="84" y="194">─</text>
<text x="94" y="194">─</text>
<text x="104" y="194">─</text>
<text x="114" y="194">─</text>
<text x="124" y="194">─</text>
<text x="134" y="194">─</text>
<text x="144" y="194">─</text>
<text x="154" y="194">─</text>
<text x="164" y="194">─</text>
<text x="174" y="194">─</text>
<text x="184" y="194">─</text>
<text x="194" y="194">─</text>
<text x="204" y="194">─</text>
<text x="214" y="194">─</text>
<text x="224" y="194">─</text>
<text x="234" y="194">─</text>
<text x="244" y="194">─</text>
<text x="254" y="194">─</text>
<text x="264" y="194">─</text>
<text x="274" y="194">─</text>
<text x="284" y="194">─</text>
<text x="294" y="194">─</text>
<text x="304" y="194">─</text>
<text x="314" y="194">─</text>
<text x="324" y="194">─</text>
<text x="334" y="194">─</text>
<text x="344" y="194">─</text>
<text x="354" y="194">─</text>
<text x="364" y="194">─</text>
<text x="374" y="194">─</text>
<text x="384" y="194">─</text>
<text x="394" y="194">─</text>
<text x="404" y="194">─</text>
<text x="414" y="194">─</text>
<text x="424" y="194">─</text>
<text x="434" y="194">─</text>
<text x="444" y="194">─</text>
<text x="454" y="194">─</text>
<text x="464" y="194">─</text>
<text x="474" y="194">─</text>
<text x="484" y="194">─</text>
<text x="494" y="194">─</text>
<text x="504" y="194">─</text>
<text x="514" y="194">─</text>
<text x="524" y="194">─</text>
<text x="534" y="194">─</text>
<text x="544" y="194">─</text>
<text x="554" y="194">─</text>
<text x="564" y="194">─</text>
<text x="574" y="194">┘</text>
<text x="84" y="214">│</text>
<text x="104" y="214">失</text>
<text x="124" y="214">敗</text>
<text x="84" y="234">▼</text>
<text x="34" y="254">┌</text>
<text x="44" y="254">─</text>
<text x="54" y="254">─</text>
<text x="64" y="254">─</text>
<text x="74" y="254">─</text>
<text x="84" y="254">─</text>
<text x="94" y="254">─</text>
<text x="104" y="254">─</text>
<text x="114" y="254">─</text>
<text x="124" y="254">─</text>
<text x="134" y="254">─</text>
<text x="144" y="254">─</text>
<text x="154" y="254">─</text>
<text x="164" y="254">─</text>
<text x="174" y="254">─</text>
<text x="184" y="254">─</text>
<text x="194" y="254">─</text>
<text x="204" y="254">─</text>
<text x="214" y="254">─</text>
<text x="224" y="254">─</text>
<text x="234" y="254">─</text>
<text x="244" y="254">─</text>
<text x="254" y="254">─</text>
<text x="264" y="254">─</text>
<text x="274" y="254">─</text>
<text x="284" y="254">─</text>
<text x="294" y="254">─</text>
<text x="304" y="254">─</text>
<text x="314" y="254">─</text>
<text x="324" y="254">─</text>
<text x="334" y="254">─</text>
<text x="344" y="254">─</text>
<text x="354" y="254">─</text>
<text x="364" y="254">─</text>
<text x="374" y="254">─</text>
<text x="384" y="254">─</text>
<text x="394" y="254">─</text>
<text x="404" y="254">─</text>
<text x="414" y="254">─</text>
<text x="424" y="254">─</text>
<text x="434" y="254">─</text>
<text x="444" y="254">─</text>
<text x="454" y="254">─</text>
<text x="464" y="254">─</text>
<text x="474" y="254">─</text>
<text x="484" y="254">─</text>
<text x="494" y="254">─</text>
<text x="504" y="254">─</text>
<text x="514" y="254">─</text>
<text x="524" y="254">─</text>
<text x="534" y="254">─</text>
<text x="544" y="254">─</text>
<text x="554" y="254">─</text>
<text x="564" y="254">─</text>
<text x="574" y="254">┐</text>
<text x="34" y="274">│</text>
<text x="54" y="274">y</text>
<text x="64" y="274">i</text>
<text x="74" y="274">e</text>
<text x="84" y="274">l</text>
<text x="94" y="274">d</text>
<text x="104" y="274">(</text>
<text x="114" y="274">)</text>
<text x="124" y="274">│</text>
<text x="144" y="274">→</text>
<text x="164" y="274">讓</text>
<text x="184" y="274">出</text>
<text x="214" y="274">C</text>
<text x="224" y="274">P</text>
<text x="234" y="274">U</text>
<text x="254" y="274">時</text>
<text x="274" y="274">間</text>
<text x="294" y="274">片</text>
<text x="314" y="274">，</text>
<text x="334" y="274">讓</text>
<text x="354" y="274">持</text>
<text x="374" y="274">鎖</text>
<text x="394" y="274">者</text>
<text x="414" y="274">跑</text>
<text x="34" y="294">│</text>
<text x="124" y="294">│</text>
<text x="164" y="294">延</text>
<text x="184" y="294">遲</text>
<text x="214" y="294">≈</text>
<text x="234" y="294">1</text>
<text x="254" y="294">排</text>
<text x="274" y="294">程</text>
<text x="294" y="294">週</text>
<text x="314" y="294">期</text>
<text x="334" y="294">（</text>
<text x="354" y="294">~</text>
<text x="364" y="294">1</text>
<text x="374" y="294">0</text>
<text x="384" y="294">0</text>
<text x="394" y="294">u</text>
<text x="404" y="294">s</text>
<text x="414" y="294">）</text>
<text x="34" y="314">└</text>
<text x="44" y="314">─</text>
<text x="54" y="314">─</text>
<text x="64" y="314">─</text>
<text x="74" y="314">─</text>
<text x="84" y="314">─</text>
<text x="94" y="314">─</text>
<text x="104" y="314">─</text>
<text x="114" y="314">─</text>
<text x="124" y="314">─</text>
<text x="134" y="314">─</text>
<text x="144" y="314">─</text>
<text x="154" y="314">─</text>
<text x="164" y="314">─</text>
<text x="174" y="314">─</text>
<text x="184" y="314">─</text>
<text x="194" y="314">─</text>
<text x="204" y="314">─</text>
<text x="214" y="314">─</text>
<text x="224" y="314">─</text>
<text x="234" y="314">─</text>
<text x="244" y="314">─</text>
<text x="254" y="314">─</text>
<text x="264" y="314">─</text>
<text x="274" y="314">─</text>
<text x="284" y="314">─</text>
<text x="294" y="314">─</text>
<text x="304" y="314">─</text>
<text x="314" y="314">─</text>
<text x="324" y="314">─</text>
<text x="334" y="314">─</text>
<text x="344" y="314">─</text>
<text x="354" y="314">─</text>
<text x="364" y="314">─</text>
<text x="374" y="314">─</text>
<text x="384" y="314">─</text>
<text x="394" y="314">─</text>
<text x="404" y="314">─</text>
<text x="414" y="314">─</text>
<text x="424" y="314">─</text>
<text x="434" y="314">─</text>
<text x="444" y="314">─</text>
<text x="454" y="314">─</text>
<text x="464" y="314">─</text>
<text x="474" y="314">─</text>
<text x="484" y="314">─</text>
<text x="494" y="314">─</text>
<text x="504" y="314">─</text>
<text x="514" y="314">─</text>
<text x="524" y="314">─</text>
<text x="534" y="314">─</text>
<text x="544" y="314">─</text>
<text x="554" y="314">─</text>
<text x="564" y="314">─</text>
<text x="574" y="314">┘</text>
<text x="84" y="334">│</text>
<text x="104" y="334">仍</text>
<text x="124" y="334">失</text>
<text x="144" y="334">敗</text>
<text x="84" y="354">▼</text>
<text x="34" y="374">┌</text>
<text x="44" y="374">─</text>
<text x="54" y="374">─</text>
<text x="64" y="374">─</text>
<text x="74" y="374">─</text>
<text x="84" y="374">─</text>
<text x="94" y="374">─</text>
<text x="104" y="374">─</text>
<text x="114" y="374">─</text>
<text x="124" y="374">─</text>
<text x="134" y="374">─</text>
<text x="144" y="374">─</text>
<text x="154" y="374">─</text>
<text x="164" y="374">─</text>
<text x="174" y="374">─</text>
<text x="184" y="374">─</text>
<text x="194" y="374">─</text>
<text x="204" y="374">─</text>
<text x="214" y="374">─</text>
<text x="224" y="374">─</text>
<text x="234" y="374">─</text>
<text x="244" y="374">─</text>
<text x="254" y="374">─</text>
<text x="264" y="374">─</text>
<text x="274" y="374">─</text>
<text x="284" y="374">─</text>
<text x="294" y="374">─</text>
<text x="304" y="374">─</text>
<text x="314" y="374">─</text>
<text x="324" y="374">─</text>
<text x="334" y="374">─</text>
<text x="344" y="374">─</text>
<text x="354" y="374">─</text>
<text x="364" y="374">─</text>
<text x="374" y="374">─</text>
<text x="384" y="374">─</text>
<text x="394" y="374">─</text>
<text x="404" y="374">─</text>
<text x="414" y="374">─</text>
<text x="424" y="374">─</text>
<text x="434" y="374">─</text>
<text x="444" y="374">─</text>
<text x="454" y="374">─</text>
<text x="464" y="374">─</text>
<text x="474" y="374">─</text>
<text x="484" y="374">─</text>
<text x="494" y="374">─</text>
<text x="504" y="374">─</text>
<text x="514" y="374">─</text>
<text x="524" y="374">─</text>
<text x="534" y="374">─</text>
<text x="544" y="374">─</text>
<text x="554" y="374">─</text>
<text x="564" y="374">─</text>
<text x="574" y="374">┐</text>
<text x="34" y="394">│</text>
<text x="64" y="394">E</text>
<text x="74" y="394">x</text>
<text x="84" y="394">p</text>
<text x="94" y="394">o</text>
<text x="104" y="394">n</text>
<text x="114" y="394">e</text>
<text x="124" y="394">n</text>
<text x="134" y="394">t</text>
<text x="144" y="394">i</text>
<text x="154" y="394">a</text>
<text x="164" y="394">l</text>
<text x="184" y="394">B</text>
<text x="194" y="394">a</text>
<text x="204" y="394">c</text>
<text x="214" y="394">k</text>
<text x="224" y="394">o</text>
<text x="234" y="394">f</text>
<text x="244" y="394">f</text>
<text x="574" y="394">│</text>
<text x="274" y="414">│</text>
<text x="574" y="414">│</text>
<text x="34" y="434">│</text>
<text x="64" y="434">d</text>
<text x="74" y="434">e</text>
<text x="84" y="434">l</text>
<text x="94" y="434">a</text>
<text x="104" y="434">y</text>
<text x="124" y="434">=</text>
<text x="144" y="434">m</text>
<text x="154" y="434">i</text>
<text x="164" y="434">n</text>
<text x="174" y="434">(</text>
<text x="184" y="434">1</text>
<text x="194" y="434">m</text>
<text x="204" y="434">s</text>
<text x="224" y="434">×</text>
<text x="244" y="434">2</text>
<text x="254" y="434">^</text>
<text x="264" y="434">n</text>
<text x="274" y="434">,</text>
<text x="574" y="434">│</text>
<text x="34" y="454">│</text>
<text x="184" y="454">m</text>
<text x="194" y="454">a</text>
<text x="204" y="454">x</text>
<text x="214" y="454">_</text>
<text x="224" y="454">d</text>
<text x="234" y="454">e</text>
<text x="244" y="454">l</text>
<text x="254" y="454">a</text>
<text x="264" y="454">y</text>
<text x="274" y="454">)</text>
<text x="574" y="454">│</text>
<text x="274" y="474">│</text>
<text x="574" y="474">│</text>
<text x="34" y="494">│</text>
<text x="64" y="494">r</text>
<text x="74" y="494">e</text>
<text x="84" y="494">t</text>
<text x="94" y="494">r</text>
<text x="104" y="494">y</text>
<text x="124" y="494">1</text>
<text x="134" y="494">:</text>
<text x="154" y="494">s</text>
<text x="164" y="494">l</text>
<text x="174" y="494">e</text>
<text x="184" y="494">e</text>
<text x="194" y="494">p</text>
<text x="214" y="494">1</text>
<text x="224" y="494">m</text>
<text x="234" y="494">s</text>
<text x="574" y="494">│</text>
<text x="34" y="514">│</text>
<text x="64" y="514">r</text>
<text x="74" y="514">e</text>
<text x="84" y="514">t</text>
<text x="94" y="514">r</text>
<text x="104" y="514">y</text>
<text x="124" y="514">2</text>
<text x="134" y="514">:</text>
<text x="154" y="514">s</text>
<text x="164" y="514">l</text>
<text x="174" y="514">e</text>
<text x="184" y="514">e</text>
<text x="194" y="514">p</text>
<text x="214" y="514">2</text>
<text x="224" y="514">m</text>
<text x="234" y="514">s</text>
<text x="574" y="514">│</text>
<text x="34" y="534">│</text>
<text x="64" y="534">r</text>
<text x="74" y="534">e</text>
<text x="84" y="534">t</text>
<text x="94" y="534">r</text>
<text x="104" y="534">y</text>
<text x="124" y="534">3</text>
<text x="134" y="534">:</text>
<text x="154" y="534">s</text>
<text x="164" y="534">l</text>
<text x="174" y="534">e</text>
<text x="184" y="534">e</text>
<text x="194" y="534">p</text>
<text x="214" y="534">4</text>
<text x="224" y="534">m</text>
<text x="234" y="534">s</text>
<text x="574" y="534">│</text>
<text x="34" y="554">│</text>
<text x="64" y="554">r</text>
<text x="74" y="554">e</text>
<text x="84" y="554">t</text>
<text x="94" y="554">r</text>
<text x="104" y="554">y</text>
<text x="124" y="554">4</text>
<text x="134" y="554">:</text>
<text x="154" y="554">s</text>
<text x="164" y="554">l</text>
<text x="174" y="554">e</text>
<text x="184" y="554">e</text>
<text x="194" y="554">p</text>
<text x="214" y="554">8</text>
<text x="224" y="554">m</text>
<text x="234" y="554">s</text>
<text x="264" y="554">─</text>
<text x="274" y="554">─</text>
<text x="284" y="554">─</text>
<text x="294" y="554">─</text>
<text x="304" y="554">─</text>
<text x="314" y="554">─</text>
<text x="324" y="554">►</text>
<text x="334" y="554">│</text>
<text x="354" y="554">抖</text>
<text x="374" y="554">動</text>
<text x="404" y="554">(</text>
<text x="414" y="554">j</text>
<text x="424" y="554">i</text>
<text x="434" y="554">t</text>
<text x="444" y="554">t</text>
<text x="454" y="554">e</text>
<text x="464" y="554">r</text>
<text x="474" y="554">)</text>
<text x="494" y="554">避</text>
<text x="514" y="554">免</text>
<text x="34" y="574">│</text>
<text x="64" y="574">r</text>
<text x="74" y="574">e</text>
<text x="84" y="574">t</text>
<text x="94" y="574">r</text>
<text x="104" y="574">y</text>
<text x="124" y="574">5</text>
<text x="134" y="574">:</text>
<text x="154" y="574">s</text>
<text x="164" y="574">l</text>
<text x="174" y="574">e</text>
<text x="184" y="574">e</text>
<text x="194" y="574">p</text>
<text x="214" y="574">1</text>
<text x="224" y="574">6</text>
<text x="234" y="574">m</text>
<text x="244" y="574">s</text>
<text x="334" y="574">│</text>
<text x="354" y="574">所</text>
<text x="374" y="574">有</text>
<text x="394" y="574">執</text>
<text x="414" y="574">行</text>
<text x="434" y="574">緒</text>
<text x="454" y="574">同</text>
<text x="474" y="574">時</text>
<text x="494" y="574">重</text>
<text x="514" y="574">試</text>
<text x="34" y="594">└</text>
<text x="44" y="594">─</text>
<text x="54" y="594">─</text>
<text x="64" y="594">─</text>
<text x="74" y="594">─</text>
<text x="84" y="594">─</text>
<text x="94" y="594">─</text>
<text x="104" y="594">─</text>
<text x="114" y="594">─</text>
<text x="124" y="594">─</text>
<text x="134" y="594">─</text>
<text x="144" y="594">─</text>
<text x="154" y="594">─</text>
<text x="164" y="594">─</text>
<text x="174" y="594">─</text>
<text x="184" y="594">─</text>
<text x="194" y="594">─</text>
<text x="204" y="594">─</text>
<text x="214" y="594">─</text>
<text x="224" y="594">─</text>
<text x="234" y="594">─</text>
<text x="244" y="594">─</text>
<text x="254" y="594">─</text>
<text x="264" y="594">─</text>
<text x="274" y="594">─</text>
<text x="284" y="594">─</text>
<text x="294" y="594">─</text>
<text x="304" y="594">─</text>
<text x="314" y="594">─</text>
<text x="324" y="594">─</text>
<text x="334" y="594">─</text>
<text x="344" y="594">─</text>
<text x="354" y="594">─</text>
<text x="364" y="594">─</text>
<text x="374" y="594">─</text>
<text x="384" y="594">─</text>
<text x="394" y="594">─</text>
<text x="404" y="594">─</text>
<text x="414" y="594">─</text>
<text x="424" y="594">─</text>
<text x="434" y="594">─</text>
<text x="444" y="594">─</text>
<text x="454" y="594">─</text>
<text x="464" y="594">─</text>
<text x="474" y="594">─</text>
<text x="484" y="594">─</text>
<text x="494" y="594">─</text>
<text x="504" y="594">─</text>
<text x="514" y="594">─</text>
<text x="524" y="594">─</text>
<text x="534" y="594">─</text>
<text x="544" y="594">─</text>
<text x="554" y="594">─</text>
<text x="564" y="594">─</text>
<text x="574" y="594">┘</text>
<text x="84" y="614">│</text>
<text x="104" y="614">超</text>
<text x="124" y="614">過</text>
<text x="144" y="614">閾</text>
<text x="164" y="614">值</text>
<text x="184" y="614">（</text>
<text x="204" y="614">例</text>
<text x="224" y="614">如</text>
<text x="254" y="614">6</text>
<text x="264" y="614">4</text>
<text x="274" y="614">m</text>
<text x="284" y="614">s</text>
<text x="294" y="614">）</text>
<text x="84" y="634">▼</text>
<text x="34" y="654">┌</text>
<text x="44" y="654">─</text>
<text x="54" y="654">─</text>
<text x="64" y="654">─</text>
<text x="74" y="654">─</text>
<text x="84" y="654">─</text>
<text x="94" y="654">─</text>
<text x="104" y="654">─</text>
<text x="114" y="654">─</text>
<text x="124" y="654">─</text>
<text x="134" y="654">─</text>
<text x="144" y="654">─</text>
<text x="154" y="654">─</text>
<text x="164" y="654">─</text>
<text x="174" y="654">─</text>
<text x="184" y="654">─</text>
<text x="194" y="654">─</text>
<text x="204" y="654">─</text>
<text x="214" y="654">─</text>
<text x="224" y="654">─</text>
<text x="234" y="654">─</text>
<text x="244" y="654">─</text>
<text x="254" y="654">─</text>
<text x="264" y="654">─</text>
<text x="274" y="654">─</text>
<text x="284" y="654">─</text>
<text x="294" y="654">─</text>
<text x="304" y="654">─</text>
<text x="314" y="654">─</text>
<text x="324" y="654">─</text>
<text x="334" y="654">─</text>
<text x="344" y="654">─</text>
<text x="354" y="654">─</text>
<text x="364" y="654">─</text>
<text x="374" y="654">─</text>
<text x="384" y="654">─</text>
<text x="394" y="654">─</text>
<text x="404" y="654">─</text>
<text x="414" y="654">─</text>
<text x="424" y="654">─</text>
<text x="434" y="654">─</text>
<text x="444" y="654">─</text>
<text x="454" y="654">─</text>
<text x="464" y="654">─</text>
<text x="474" y="654">─</text>
<text x="484" y="654">─</text>
<text x="494" y="654">─</text>
<text x="504" y="654">─</text>
<text x="514" y="654">─</text>
<text x="524" y="654">─</text>
<text x="534" y="654">─</text>
<text x="544" y="654">─</text>
<text x="554" y="654">─</text>
<text x="564" y="654">─</text>
<text x="574" y="654">┐</text>
<text x="34" y="674">│</text>
<text x="64" y="674">p</text>
<text x="74" y="674">a</text>
<text x="84" y="674">r</text>
<text x="94" y="674">k</text>
<text x="104" y="674">(</text>
<text x="114" y="674">)</text>
<text x="134" y="674">/</text>
<text x="154" y="674">f</text>
<text x="164" y="674">u</text>
<text x="174" y="674">t</text>
<text x="184" y="674">e</text>
<text x="194" y="674">x</text>
<text x="204" y="674">_</text>
<text x="214" y="674">w</text>
<text x="224" y="674">a</text>
<text x="234" y="674">i</text>
<text x="244" y="674">t</text>
<text x="254" y="674">(</text>
<text x="264" y="674">)</text>
<text x="574" y="674">│</text>
<text x="284" y="694">│</text>
<text x="574" y="694">│</text>
<text x="34" y="714">│</text>
<text x="64" y="714">執</text>
<text x="84" y="714">行</text>
<text x="104" y="714">緒</text>
<text x="124" y="714">進</text>
<text x="144" y="714">入</text>
<text x="164" y="714">睡</text>
<text x="184" y="714">眠</text>
<text x="574" y="714">│</text>
<text x="34" y="734">│</text>
<text x="64" y="734">O</text>
<text x="74" y="734">S</text>
<text x="94" y="734">排</text>
<text x="114" y="734">程</text>
<text x="134" y="734">器</text>
<text x="154" y="734">管</text>
<text x="174" y="734">理</text>
<text x="574" y="734">│</text>
<text x="34" y="754">│</text>
<text x="64" y="754">鎖</text>
<text x="84" y="754">釋</text>
<text x="104" y="754">放</text>
<text x="124" y="754">時</text>
<text x="154" y="754">u</text>
<text x="164" y="754">n</text>
<text x="174" y="754">p</text>
<text x="184" y="754">a</text>
<text x="194" y="754">r</text>
<text x="204" y="754">k</text>
<text x="214" y="754">(</text>
<text x="224" y="754">)</text>
<text x="244" y="754">喚</text>
<text x="264" y="754">醒</text>
<text x="574" y="754">│</text>
<text x="34" y="774">│</text>
<text x="64" y="774">C</text>
<text x="74" y="774">P</text>
<text x="84" y="774">U</text>
<text x="104" y="774">完</text>
<text x="124" y="774">全</text>
<text x="144" y="774">釋</text>
<text x="164" y="774">放</text>
<text x="194" y="774">→</text>
<text x="214" y="774">零</text>
<text x="234" y="774">燒</text>
<text x="254" y="774">耗</text>
<text x="574" y="774">│</text>
<text x="34" y="794">└</text>
<text x="44" y="794">─</text>
<text x="54" y="794">─</text>
<text x="64" y="794">─</text>
<text x="74" y="794">─</text>
<text x="84" y="794">─</text>
<text x="94" y="794">─</text>
<text x="104" y="794">─</text>
<text x="114" y="794">─</text>
<text x="124" y="794">─</text>
<text x="134" y="794">─</text>
<text x="144" y="794">─</text>
<text x="154" y="794">─</text>
<text x="164" y="794">─</text>
<text x="174" y="794">─</text>
<text x="184" y="794">─</text>
<text x="194" y="794">─</text>
<text x="204" y="794">─</text>
<text x="214" y="794">─</text>
<text x="224" y="794">─</text>
<text x="234" y="794">─</text>
<text x="244" y="794">─</text>
<text x="254" y="794">─</text>
<text x="264" y="794">─</text>
<text x="274" y="794">─</text>
<text x="284" y="794">─</text>
<text x="294" y="794">─</text>
<text x="304" y="794">─</text>
<text x="314" y="794">─</text>
<text x="324" y="794">─</text>
<text x="334" y="794">─</text>
<text x="344" y="794">─</text>
<text x="354" y="794">─</text>
<text x="364" y="794">─</text>
<text x="374" y="794">─</text>
<text x="384" y="794">─</text>
<text x="394" y="794">─</text>
<text x="404" y="794">─</text>
<text x="414" y="794">─</text>
<text x="424" y="794">─</text>
<text x="434" y="794">─</text>
<text x="444" y="794">─</text>
<text x="454" y="794">─</text>
<text x="464" y="794">─</text>
<text x="474" y="794">─</text>
<text x="484" y="794">─</text>
<text x="494" y="794">─</text>
<text x="504" y="794">─</text>
<text x="514" y="794">─</text>
<text x="524" y="794">─</text>
<text x="534" y="794">─</text>
<text x="544" y="794">─</text>
<text x="554" y="794">─</text>
<text x="564" y="794">─</text>
<text x="574" y="794">┘</text>
<text x="34" y="834">自</text>
<text x="54" y="834">旋</text>
<text x="74" y="834">次</text>
<text x="94" y="834">數</text>
<text x="124" y="834">v</text>
<text x="134" y="834">s</text>
<text x="154" y="834">退</text>
<text x="174" y="834">避</text>
<text x="194" y="834">延</text>
<text x="214" y="834">遲</text>
<text x="234" y="834">關</text>
<text x="254" y="834">係</text>
<text x="274" y="834">：</text>
<text x="34" y="874">延</text>
<text x="54" y="874">遲</text>
<text x="34" y="894">(</text>
<text x="44" y="894">m</text>
<text x="54" y="894">s</text>
<text x="64" y="894">)</text>
<text x="34" y="914">6</text>
<text x="44" y="914">4</text>
<text x="64" y="914">│</text>
<text x="374" y="914">┌</text>
<text x="384" y="914">─</text>
<text x="394" y="914">─</text>
<text x="404" y="914">─</text>
<text x="414" y="914">─</text>
<text x="424" y="914">─</text>
<text x="434" y="914">─</text>
<text x="444" y="914">─</text>
<text x="454" y="914">─</text>
<text x="474" y="914">p</text>
<text x="484" y="914">a</text>
<text x="494" y="914">r</text>
<text x="504" y="914">k</text>
<text x="524" y="914">阻</text>
<text x="544" y="914">塞</text>
<text x="34" y="934">3</text>
<text x="44" y="934">2</text>
<text x="64" y="934">│</text>
<text x="334" y="934">─</text>
<text x="344" y="934">─</text>
<text x="354" y="934">─</text>
<text x="364" y="934">─</text>
<text x="374" y="934">─</text>
<text x="384" y="934">─</text>
<text x="394" y="934">─</text>
<text x="404" y="934">─</text>
<text x="414" y="934">─</text>
<text x="424" y="934">─</text>
<text x="434" y="934">─</text>
<text x="444" y="934">─</text>
<text x="454" y="934">─</text>
<text x="464" y="934">─</text>
<text x="474" y="934">─</text>
<text x="484" y="934">─</text>
<text x="494" y="934">─</text>
<text x="504" y="934">─</text>
<text x="514" y="934">─</text>
<text x="524" y="934">─</text>
<text x="534" y="934">─</text>
<text x="544" y="934">─</text>
<text x="554" y="934">─</text>
<text x="564" y="934">─</text>
<text x="574" y="934">┘</text>
<text x="34" y="954">1</text>
<text x="44" y="954">6</text>
<text x="64" y="954">│</text>
<text x="294" y="954">─</text>
<text x="304" y="954">─</text>
<text x="314" y="954">─</text>
<text x="324" y="954">─</text>
<text x="44" y="974">8</text>
<text x="64" y="974">│</text>
<text x="254" y="974">─</text>
<text x="264" y="974">─</text>
<text x="274" y="974">─</text>
<text x="284" y="974">─</text>
<text x="44" y="994">4</text>
<text x="64" y="994">│</text>
<text x="214" y="994">─</text>
<text x="224" y="994">─</text>
<text x="234" y="994">─</text>
<text x="244" y="994">─</text>
<text x="44" y="1014">2</text>
<text x="64" y="1014">│</text>
<text x="174" y="1014">─</text>
<text x="184" y="1014">─</text>
<text x="194" y="1014">─</text>
<text x="204" y="1014">─</text>
<text x="44" y="1034">1</text>
<text x="64" y="1034">│</text>
<text x="134" y="1034">─</text>
<text x="144" y="1034">─</text>
<text x="154" y="1034">─</text>
<text x="164" y="1034">─</text>
<text x="44" y="1054">0</text>
<text x="64" y="1054">│</text>
<text x="74" y="1054">─</text>
<text x="84" y="1054">─</text>
<text x="94" y="1054">─</text>
<text x="104" y="1054">─</text>
<text x="114" y="1054">─</text>
<text x="124" y="1054">─</text>
<text x="154" y="1054">y</text>
<text x="164" y="1054">i</text>
<text x="174" y="1054">e</text>
<text x="184" y="1054">l</text>
<text x="194" y="1054">d</text>
<text x="64" y="1074">└</text>
<text x="74" y="1074">─</text>
<text x="84" y="1074">─</text>
<text x="94" y="1074">─</text>
<text x="104" y="1074">─</text>
<text x="114" y="1074">─</text>
<text x="124" y="1074">─</text>
<text x="134" y="1074">─</text>
<text x="144" y="1074">─</text>
<text x="154" y="1074">─</text>
<text x="164" y="1074">─</text>
<text x="174" y="1074">─</text>
<text x="184" y="1074">─</text>
<text x="194" y="1074">─</text>
<text x="204" y="1074">─</text>
<text x="214" y="1074">─</text>
<text x="224" y="1074">─</text>
<text x="234" y="1074">─</text>
<text x="244" y="1074">─</text>
<text x="254" y="1074">─</text>
<text x="264" y="1074">─</text>
<text x="274" y="1074">─</text>
<text x="284" y="1074">─</text>
<text x="294" y="1074">─</text>
<text x="304" y="1074">─</text>
<text x="314" y="1074">─</text>
<text x="324" y="1074">─</text>
<text x="334" y="1074">─</text>
<text x="344" y="1074">─</text>
<text x="364" y="1074">自</text>
<text x="384" y="1074">旋</text>
<text x="404" y="1074">次</text>
<text x="424" y="1074">數</text>
<text x="74" y="1094">0</text>
<text x="114" y="1094">2</text>
<text x="154" y="1094">4</text>
<text x="194" y="1094">8</text>
<text x="224" y="1094">1</text>
<text x="234" y="1094">6</text>
<text x="264" y="1094">3</text>
<text x="274" y="1094">2</text>
<text x="304" y="1094">閾</text>
<text x="324" y="1094">值</text>
</g>
</svg>
</div>
<ul>
<li>指數退避（backoff）</li>
<li>達到閾值後改阻塞</li>
</ul>
<pre><code class="language-text">try CAS(lock, 0, 1)
fail -&gt; pause -&gt; retry
</code></pre>
<h2 id="示意圖"><a class="header" href="#示意圖">示意圖</a></h2>
<pre><code class="language-text">lock flag=0
T1 CAS(0-&gt;1) success 進入
T2 CAS(0-&gt;1) fail 自旋等待
</code></pre>
<h2 id="跨語言完整範例"><a class="header" href="#跨語言完整範例">跨語言完整範例</a></h2>
<h3 id="c--atomic_flag-自旋鎖4-執行緒並發測試"><a class="header" href="#c--atomic_flag-自旋鎖4-執行緒並發測試">C — atomic_flag 自旋鎖，4 執行緒並發測試</a></h3>
<pre><code class="language-c">#include &lt;stdio.h&gt;
#include &lt;stdatomic.h&gt;
#include &lt;pthread.h&gt;

#define THREADS 4
#define ITERS   50000

atomic_flag spin_lock = ATOMIC_FLAG_INIT;
long counter = 0;

void lock(void) {
    while (atomic_flag_test_and_set_explicit(&amp;spin_lock, memory_order_acquire))
        ;  /* spin */
}

void unlock(void) {
    atomic_flag_clear_explicit(&amp;spin_lock, memory_order_release);
}

void *worker(void *arg) {
    (void)arg;
    for (int i = 0; i &lt; ITERS; i++) {
        lock();
        counter++;
        unlock();
    }
    return NULL;
}

int main(void) {
    pthread_t tids[THREADS];
    for (int i = 0; i &lt; THREADS; i++)
        pthread_create(&amp;tids[i], NULL, worker, NULL);
    for (int i = 0; i &lt; THREADS; i++)
        pthread_join(tids[i], NULL);
    printf("counter = %ld (expected %d)\n", counter, THREADS * ITERS);
    return 0;
}
</code></pre>
<h3 id="c--stdatomic_flag-自旋鎖封裝"><a class="header" href="#c--stdatomic_flag-自旋鎖封裝">C++ — std::atomic_flag 自旋鎖封裝</a></h3>
<pre><code class="language-cpp">#include &lt;iostream&gt;
#include &lt;atomic&gt;
#include &lt;thread&gt;
#include &lt;vector&gt;

class SpinLock {
    std::atomic_flag flag_ = ATOMIC_FLAG_INIT;
public:
    void lock() {
        while (flag_.test_and_set(std::memory_order_acquire))
            ;  /* spin */
    }
    void unlock() {
        flag_.clear(std::memory_order_release);
    }
};

int main() {
    SpinLock spin;
    long counter = 0;
    const int iters = 50000;
    auto task = [&amp;]() {
        for (int i = 0; i &lt; iters; i++) {
            spin.lock();
            counter++;
            spin.unlock();
        }
    };
    std::vector&lt;std::thread&gt; threads;
    for (int i = 0; i &lt; 4; i++)
        threads.emplace_back(task);
    for (auto &amp;t : threads)
        t.join();
    std::cout &lt;&lt; "counter = " &lt;&lt; counter
              &lt;&lt; " (expected " &lt;&lt; 4 * iters &lt;&lt; ")\n";
}
</code></pre>
<h3 id="rust--atomicbool-cas-自旋鎖"><a class="header" href="#rust--atomicbool-cas-自旋鎖">Rust — AtomicBool CAS 自旋鎖</a></h3>
<pre><pre class="playground"><code class="language-rust">use std::sync::atomic::{AtomicBool, Ordering};
use std::sync::Arc;
use std::thread;

struct SpinLock(AtomicBool);

impl SpinLock {
    fn new() -&gt; Self { SpinLock(AtomicBool::new(false)) }
    fn lock(&amp;self) {
        while self.0
            .compare_exchange_weak(false, true, Ordering::Acquire, Ordering::Relaxed)
            .is_err()
        {
            std::hint::spin_loop();
        }
    }
    fn unlock(&amp;self) {
        self.0.store(false, Ordering::Release);
    }
}

fn main() {
    let spin = Arc::new(SpinLock::new());
    let counter = Arc::new(std::sync::atomic::AtomicI64::new(0));
    let mut handles = vec![];
    for _ in 0..4 {
        let spin = Arc::clone(&amp;spin);
        let counter = Arc::clone(&amp;counter);
        handles.push(thread::spawn(move || {
            for _ in 0..50_000 {
                spin.lock();
                counter.fetch_add(1, Ordering::Relaxed);
                spin.unlock();
            }
        }));
    }
    for h in handles { h.join().unwrap(); }
    println!("counter = {} (expected 200000)", counter.load(Ordering::SeqCst));
}</code></pre></pre>
<h3 id="go--atomicbool-cas-自旋鎖"><a class="header" href="#go--atomicbool-cas-自旋鎖">Go — atomic.Bool CAS 自旋鎖</a></h3>
<pre><code class="language-go">package main

import (
    "fmt"
    "sync"
    "sync/atomic"
)

type SpinLock struct{ held atomic.Bool }

func (s *SpinLock) Lock() {
    for !s.held.CompareAndSwap(false, true) {
        // spin
    }
}

func (s *SpinLock) Unlock() {
    s.held.Store(false)
}

func main() {
    var spin SpinLock
    var counter int64
    var wg sync.WaitGroup
    for i := 0; i &lt; 4; i++ {
        wg.Add(1)
        go func() {
            defer wg.Done()
            for j := 0; j &lt; 50_000; j++ {
                spin.Lock()
                counter++
                spin.Unlock()
            }
        }()
    }
    wg.Wait()
    fmt.Printf("counter = %d (expected 200000)\n", counter)
}
</code></pre>
<h3 id="python--ctypes-atomic-模擬-cas-自旋鎖"><a class="header" href="#python--ctypes-atomic-模擬-cas-自旋鎖">Python — ctypes atomic 模擬 CAS 自旋鎖</a></h3>
<pre><code class="language-python">"""Chapter 16: CAS spin lock — 4 threads, atomic counter verification."""
import threading
import time


class SpinLock:
    """用 threading.Lock 模擬 CAS atomic_flag 語意。"""

    def __init__(self):
        self._held = False
        self._internal = threading.Lock()

    def lock(self):
        while True:
            with self._internal:
                if not self._held:
                    self._held = True
                    return
            time.sleep(0)  # yield

    def unlock(self):
        with self._internal:
            self._held = False


def main():
    spin = SpinLock()
    counter = [0]
    iters = 50_000

    def worker():
        for _ in range(iters):
            spin.lock()
            counter[0] += 1
            spin.unlock()

    threads = [threading.Thread(target=worker) for _ in range(4)]
    for t in threads:
        t.start()
    for t in threads:
        t.join()
    expected = 4 * iters
    print(f"counter = {counter[0]} (expected {expected})")
    assert counter[0] == expected, "競態條件！CAS 保護失效"
    print("通過：自旋鎖保護臨界區正確")


if __name__ == "__main__":
    main()
</code></pre>
<h2 id="完整專案級範例python"><a class="header" href="#完整專案級範例python">完整專案級範例（Python）</a></h2>
<p>檔案：<code>examples/python/ch16.py</code></p>
<pre><code class="language-bash">python3 examples/python/ch16.py
</code></pre>
<pre><code class="language-python">"""Chapter 16: spin lock with exponential backoff."""
import threading
import time


class SpinLockWithBackoff:
    """帶指數退避的自旋鎖，高衝突時自動降低 CPU 浪費。"""

    MAX_BACKOFF_MS = 64

    def __init__(self):
        self._flag = False
        self._guard = threading.Lock()

    def lock(self):
        delay_ms = 1
        while True:
            with self._guard:
                if not self._flag:
                    self._flag = True
                    return
            # 指數退避：避免所有執行緒同時重試
            time.sleep(delay_ms / 1000)
            delay_ms = min(delay_ms * 2, self.MAX_BACKOFF_MS)

    def unlock(self):
        with self._guard:
            self._flag = False


if __name__ == "__main__":
    lk = SpinLockWithBackoff()
    state = {"x": 0}

    def work():
        for _ in range(5000):
            lk.lock()
            state["x"] += 1
            lk.unlock()

    ts = [threading.Thread(target=work) for _ in range(4)]
    for t in ts:
        t.start()
    for t in ts:
        t.join()
    print("x=", state["x"])
    assert state["x"] == 20000
    print("通過：指數退避自旋鎖保護正確")
</code></pre>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="ch15-threadpool-practice.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="ch17-rwlock-cache-practice.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="ch15-threadpool-practice.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="ch17-rwlock-cache-practice.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->



    </div>
    </body>
</html>
